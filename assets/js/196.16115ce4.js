(window.webpackJsonp=window.webpackJsonp||[]).push([[196],{1501:function(a,s,e){"use strict";e.r(s);var n=e(4),t=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("单节点安装只适合作为开发学习环境")]),a._v(" "),s("blockquote",[s("p",[a._v("参考： https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-common/SingleCluster.html")])]),a._v(" "),s("h2",{attrs:{id:"下载镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载镜像"}},[a._v("#")]),a._v(" 下载镜像")]),a._v(" "),s("p",[a._v("https://archive.apache.org/dist/hadoop/common/hadoop-3.3.6/")]),a._v(" "),s("p",[a._v("JAVA 环境安装")]),a._v(" "),s("p",[a._v("http://blog.admin4j.com/JAVA/INSTALL/")]),a._v(" "),s("h1",{attrs:{id:"本地模式运行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本地模式运行"}},[a._v("#")]),a._v(" "),s("strong",[a._v("本地模式运行")])]),a._v(" "),s("p",[a._v("默认情况下，Hadoop 被配置为以非分布式模式运行，作为单个 Java 进程。这对调试很有用。")]),a._v(" "),s("p",[a._v("下面的示例复制未打包的 conf 目录作为输入，然后查找并显示给定正则表达式的每个匹配项。输出被写入给定的输出目录。")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("  $ mkdir input\n  $ cp etc/hadoop/*.xml input\n  $ bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.6.jar grep input output 'dfs[a-z.]+'\n  $ cat output/*\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h2",{attrs:{id:"伪分布式模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#伪分布式模式"}},[a._v("#")]),a._v(" "),s("strong",[a._v("伪分布式模式")])]),a._v(" "),s("p",[a._v("Hadoop 还可以在单节点上以伪分布式模式运行，其中每个 Hadoop 守护进程在单独的 Java 进程中运行。")]),a._v(" "),s("h3",{attrs:{id:"环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境变量"}},[a._v("#")]),a._v(" 环境变量")]),a._v(" "),s("p",[a._v("（1）获取 Hadoop 安装路径")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ pwd\n/opt/module/hadoop-3.1.3\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("（2）打开/etc/profile.d/my_env.sh 文件")]),a._v(" "),s("p",[a._v("在 my_env.sh 文件末尾添加如下内容：（shift+g）")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("#HADOOP_HOME\nexport HADOOP_HOME=/opt/module/hadoop-3.1.3\nexport PATH=$PATH:$HADOOP_HOME/bin\nexport PATH=$PATH:$HADOOP_HOME/sbin\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[a._v("让修改后的文件生效")]),a._v(" "),s("p",[a._v("（3）让修改后的文件生效")]),a._v(" "),s("div",{staticClass:"language-text line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ source /etc/profile\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("4）测试是否安装成功")]),a._v(" "),s("div",{staticClass:"language-text line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ hadoop version\nHadoop 3.1.3\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"配置-hadoop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置-hadoop"}},[a._v("#")]),a._v(" 配置 Hadoop")]),a._v(" "),s("ul",[s("li",[s("p",[s("strong",[a._v("hadoop-env.sh")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("#文件最后添加\nexport JAVA_HOME=/export/server/jdk1.8.0_241\n\n# to limit who can execute the namenode command,\nexport HDFS_NAMENODE_USER=root\nexport HDFS_DATANODE_USER=root\nexport HDFS_SECONDARYNAMENODE_USER=root\nexport YARN_RESOURCEMANAGER_USER=root\nexport YARN_NODEMANAGER_USER=root\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br")])])]),a._v(" "),s("li",[s("p",[a._v("etc/hadoop/core-site.xml:")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("    \x3c!-- 指定NameNode的地址 --\x3e\n    <property>\n        <name>fs.defaultFS</name>\n        <value>hdfs://hadoop102:8020</value>\n    </property>\n\n    \x3c!-- 指定hadoop数据的存储目录 --\x3e\n    <property>\n        <name>hadoop.tmp.dir</name>\n        <value>/opt/module/hadoop-3.1.3/data</value>\n    </property>\n\n    \x3c!-- 配置HDFS网页登录使用的静态用户为root --\x3e\n    <property>\n        <name>hadoop.http.staticuser.user</name>\n        <value>root</value>\n    </property>\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br")])])]),a._v(" "),s("li",[s("p",[a._v("etc/hadoop/hdfs-site.xml:")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("<configuration>\n <property>\n        <name>dfs.replication</name>\n        <value>1</value>\n    </property>\n        \x3c!-- nn web端访问地址--\x3e\n        <property>\n        <name>dfs.namenode.http-address</name>\n        <value>hadoop102:9870</value>\n    </property>\n        \x3c!-- 2nn web端访问地址--\x3e\n    <property>\n        <name>dfs.namenode.secondary.http-address</name>\n        <value>hadoop104:9868</value>\n    </property>\n</configuration>\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br")])])])]),a._v(" "),s("h3",{attrs:{id:"启动-hadoop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动-hadoop"}},[a._v("#")]),a._v(" 启动 hadoop")]),a._v(" "),s("h4",{attrs:{id:"设置免登陆"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置免登陆"}},[a._v("#")]),a._v(" 设置免登陆")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("  $ ssh-keygen -t rsa -P '' -f ~/.ssh/id_rsa\n  $ cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys\n  $ chmod 0600 ~/.ssh/authorized_keys\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h4",{attrs:{id:"格式化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#格式化"}},[a._v("#")]),a._v(" 格式化")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("  $ bin/hdfs namenode -format\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[a._v("#")]),a._v(" 启动")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("  $ sbin/start-dfs.sh\n  $ sbin/stop-dfs.sh\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"yarn-单机配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#yarn-单机配置文件"}},[a._v("#")]),a._v(" YARN 单机配置文件")]),a._v(" "),s("blockquote",[s("p",[a._v("通过设置一些参数，并在 YARN 上运行 ResourceManager 守护进程和 NodeManager 守护进程，可以在 YARN 上以伪分布式方式运行 MapReduce 作业。")])]),a._v(" "),s("ul",[s("li",[s("p",[a._v("配置 yarn-site.xml")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('<?xml version="1.0" encoding="UTF-8"?>\n<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>\n\n<configuration>\n    \x3c!-- 指定MR走shuffle --\x3e\n    <property>\n        <name>yarn.nodemanager.aux-services</name>\n        <value>mapreduce_shuffle</value>\n    </property>\n\n    \x3c!-- 指定ResourceManager的地址--\x3e\n    <property>\n        <name>yarn.resourcemanager.hostname</name>\n        <value>hadoop103</value>\n    </property>\n\n    \x3c!-- 环境变量的继承 --\x3e\n    <property>\n        <name>yarn.nodemanager.env-whitelist</name>\n        <property>\n        <name>yarn.nodemanager.env-whitelist</name>\n        <value>JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_HOME,PATH,LANG,TZ,HADOOP_MAPRED_HOME</value>\n    </property>\n    </property>\n</configuration>\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br")])])]),a._v(" "),s("li",[s("p",[a._v("（4）MapReduce 配置文件")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('<?xml version="1.0" encoding="UTF-8"?>\n<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>\n\n<configuration>\n\t\x3c!-- 指定MapReduce程序运行在Yarn上 --\x3e\n    <property>\n        <name>mapreduce.framework.name</name>\n        <value>yarn</value>\n    </property>\n     <property>\n        <name>mapreduce.application.classpath</name\n        <value>$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/*:$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/*</value>\n    </property>\n</configuration>\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br")])])]),a._v(" "),s("li",[s("p",[a._v("（5）启动 yarn")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("  $ sbin/start-yarn.sh\n  $ sbin/stop-yarn.sh\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])])])]),a._v(" "),s("h2",{attrs:{id:"完全分布式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#完全分布式"}},[a._v("#")]),a._v(" 完全分布式")]),a._v(" "),s("blockquote",[s("p",[a._v("http://blog.admin4j.com/Hadoop/Build-Hadoop-running-environment")])]),a._v(" "),s("p",[a._v("​")])])}),[],!1,null,null,null);s.default=t.exports}}]);