<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>手把手教你玩转 SpringBoot 日志比较 | Young&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="Young丶java后端技术博客,专注后端学习与总结。擅长spring boot,JAVA基础总结,等方面的知识,关注spring,架构,elasticsearch,mysql领域.">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.53c04193.css" as="style"><link rel="preload" href="/assets/js/app.e4caa6db.js" as="script"><link rel="preload" href="/assets/js/2.d1be14c5.js" as="script"><link rel="preload" href="/assets/js/140.bb53ac81.js" as="script"><link rel="prefetch" href="/assets/js/10.20449a2b.js"><link rel="prefetch" href="/assets/js/100.f25e73b5.js"><link rel="prefetch" href="/assets/js/101.3180ba9d.js"><link rel="prefetch" href="/assets/js/102.fcd415ea.js"><link rel="prefetch" href="/assets/js/103.522869bb.js"><link rel="prefetch" href="/assets/js/104.5da1e4e4.js"><link rel="prefetch" href="/assets/js/105.e5a40fe8.js"><link rel="prefetch" href="/assets/js/106.627d6279.js"><link rel="prefetch" href="/assets/js/107.606beca1.js"><link rel="prefetch" href="/assets/js/108.100e1cb2.js"><link rel="prefetch" href="/assets/js/109.9765392e.js"><link rel="prefetch" href="/assets/js/11.da3512b5.js"><link rel="prefetch" href="/assets/js/110.b73cf0d9.js"><link rel="prefetch" href="/assets/js/111.3f77dd60.js"><link rel="prefetch" href="/assets/js/112.0c7d547d.js"><link rel="prefetch" href="/assets/js/113.1827c266.js"><link rel="prefetch" href="/assets/js/114.daf1d8a5.js"><link rel="prefetch" href="/assets/js/115.e7dca24d.js"><link rel="prefetch" href="/assets/js/116.11b303de.js"><link rel="prefetch" href="/assets/js/117.203cefba.js"><link rel="prefetch" href="/assets/js/118.61d8527b.js"><link rel="prefetch" href="/assets/js/119.1f959a37.js"><link rel="prefetch" href="/assets/js/12.11f18e06.js"><link rel="prefetch" href="/assets/js/120.c268b7aa.js"><link rel="prefetch" href="/assets/js/121.64318c96.js"><link rel="prefetch" href="/assets/js/122.cbddb70d.js"><link rel="prefetch" href="/assets/js/123.b49b84fb.js"><link rel="prefetch" href="/assets/js/124.392f030b.js"><link rel="prefetch" href="/assets/js/125.45f631c4.js"><link rel="prefetch" href="/assets/js/126.700cc575.js"><link rel="prefetch" href="/assets/js/127.d649cb2a.js"><link rel="prefetch" href="/assets/js/128.bc018411.js"><link rel="prefetch" href="/assets/js/129.d0a74611.js"><link rel="prefetch" href="/assets/js/13.1cb33dc8.js"><link rel="prefetch" href="/assets/js/130.45b1f75c.js"><link rel="prefetch" href="/assets/js/131.45ba93df.js"><link rel="prefetch" href="/assets/js/132.c58bbbd7.js"><link rel="prefetch" href="/assets/js/133.7f53922e.js"><link rel="prefetch" href="/assets/js/134.ddf0d780.js"><link rel="prefetch" href="/assets/js/135.ada3af13.js"><link rel="prefetch" href="/assets/js/136.4097c2be.js"><link rel="prefetch" href="/assets/js/137.fc910ac9.js"><link rel="prefetch" href="/assets/js/138.9628f460.js"><link rel="prefetch" href="/assets/js/139.3125ef74.js"><link rel="prefetch" href="/assets/js/14.1004ce43.js"><link rel="prefetch" href="/assets/js/141.a002ac19.js"><link rel="prefetch" href="/assets/js/142.540d19e4.js"><link rel="prefetch" href="/assets/js/143.4cbccfca.js"><link rel="prefetch" href="/assets/js/144.8a217b6a.js"><link rel="prefetch" href="/assets/js/145.9c7bc0de.js"><link rel="prefetch" href="/assets/js/146.3dfd0773.js"><link rel="prefetch" href="/assets/js/147.bc0f0d42.js"><link rel="prefetch" href="/assets/js/148.e0cdc4d5.js"><link rel="prefetch" href="/assets/js/149.8486db6e.js"><link rel="prefetch" href="/assets/js/15.703e8784.js"><link rel="prefetch" href="/assets/js/150.5f3b7fb5.js"><link rel="prefetch" href="/assets/js/151.98a3f202.js"><link rel="prefetch" href="/assets/js/152.2940f2ba.js"><link rel="prefetch" href="/assets/js/153.75f3a085.js"><link rel="prefetch" href="/assets/js/154.fa2da83b.js"><link rel="prefetch" href="/assets/js/155.113be5c8.js"><link rel="prefetch" href="/assets/js/156.0667e7f5.js"><link rel="prefetch" href="/assets/js/157.0b3e5dfa.js"><link rel="prefetch" href="/assets/js/158.a338bdd7.js"><link rel="prefetch" href="/assets/js/159.33c9771c.js"><link rel="prefetch" href="/assets/js/16.71e3d898.js"><link rel="prefetch" href="/assets/js/160.e868c8b3.js"><link rel="prefetch" href="/assets/js/161.cf61955e.js"><link rel="prefetch" href="/assets/js/162.baee00ca.js"><link rel="prefetch" href="/assets/js/163.183cde82.js"><link rel="prefetch" href="/assets/js/164.c1eadef5.js"><link rel="prefetch" href="/assets/js/165.70ee8a24.js"><link rel="prefetch" href="/assets/js/166.8e185ff2.js"><link rel="prefetch" href="/assets/js/167.0881cf57.js"><link rel="prefetch" href="/assets/js/168.88caf424.js"><link rel="prefetch" href="/assets/js/169.e7e984ff.js"><link rel="prefetch" href="/assets/js/17.b0356f05.js"><link rel="prefetch" href="/assets/js/170.c7052d81.js"><link rel="prefetch" href="/assets/js/171.2ab773fd.js"><link rel="prefetch" href="/assets/js/172.0e39f858.js"><link rel="prefetch" href="/assets/js/173.76661218.js"><link rel="prefetch" href="/assets/js/174.0ac9f795.js"><link rel="prefetch" href="/assets/js/175.da30bba2.js"><link rel="prefetch" href="/assets/js/176.0f230688.js"><link rel="prefetch" href="/assets/js/177.040e0937.js"><link rel="prefetch" href="/assets/js/178.68852030.js"><link rel="prefetch" href="/assets/js/179.c998f0ca.js"><link rel="prefetch" href="/assets/js/18.2e77c8d1.js"><link rel="prefetch" href="/assets/js/180.4f6b395f.js"><link rel="prefetch" href="/assets/js/181.577a5325.js"><link rel="prefetch" href="/assets/js/182.6b43cbf2.js"><link rel="prefetch" href="/assets/js/183.cf9e9cca.js"><link rel="prefetch" href="/assets/js/184.f0e76def.js"><link rel="prefetch" href="/assets/js/185.2d3d8eea.js"><link rel="prefetch" href="/assets/js/186.4db71601.js"><link rel="prefetch" href="/assets/js/187.8b6a6829.js"><link rel="prefetch" href="/assets/js/188.4a0b8f41.js"><link rel="prefetch" href="/assets/js/189.0a28241b.js"><link rel="prefetch" href="/assets/js/19.51c97d4c.js"><link rel="prefetch" href="/assets/js/190.5001309c.js"><link rel="prefetch" href="/assets/js/191.42778cf1.js"><link rel="prefetch" href="/assets/js/192.fabd1cb0.js"><link rel="prefetch" href="/assets/js/193.cbc113b8.js"><link rel="prefetch" href="/assets/js/194.4cf24763.js"><link rel="prefetch" href="/assets/js/195.ea5d1afb.js"><link rel="prefetch" href="/assets/js/196.16115ce4.js"><link rel="prefetch" href="/assets/js/197.b90179d1.js"><link rel="prefetch" href="/assets/js/198.456ceb51.js"><link rel="prefetch" href="/assets/js/199.a28de97a.js"><link rel="prefetch" href="/assets/js/20.79989fc4.js"><link rel="prefetch" href="/assets/js/200.72102ac7.js"><link rel="prefetch" href="/assets/js/201.e2b3a297.js"><link rel="prefetch" href="/assets/js/202.d4283e12.js"><link rel="prefetch" href="/assets/js/203.6e5e6596.js"><link rel="prefetch" href="/assets/js/204.363863cf.js"><link rel="prefetch" href="/assets/js/205.d16c5a36.js"><link rel="prefetch" href="/assets/js/206.dc867263.js"><link rel="prefetch" href="/assets/js/207.acfeaaaa.js"><link rel="prefetch" href="/assets/js/208.22c49054.js"><link rel="prefetch" href="/assets/js/209.0f7c526b.js"><link rel="prefetch" href="/assets/js/21.1b619a3f.js"><link rel="prefetch" href="/assets/js/210.b247a678.js"><link rel="prefetch" href="/assets/js/211.fe8629a4.js"><link rel="prefetch" href="/assets/js/212.48b672e5.js"><link rel="prefetch" href="/assets/js/213.08f571a8.js"><link rel="prefetch" href="/assets/js/214.04da1824.js"><link rel="prefetch" href="/assets/js/215.f60b57f4.js"><link rel="prefetch" href="/assets/js/216.4383ceb6.js"><link rel="prefetch" href="/assets/js/217.3b1ce286.js"><link rel="prefetch" href="/assets/js/218.1534ef52.js"><link rel="prefetch" href="/assets/js/219.6901e38c.js"><link rel="prefetch" href="/assets/js/22.349d3a16.js"><link rel="prefetch" href="/assets/js/220.22e0c5ea.js"><link rel="prefetch" href="/assets/js/221.2e7a5a4f.js"><link rel="prefetch" href="/assets/js/222.76b63073.js"><link rel="prefetch" href="/assets/js/223.500a058f.js"><link rel="prefetch" href="/assets/js/224.7f7c1250.js"><link rel="prefetch" href="/assets/js/225.2f183cbe.js"><link rel="prefetch" href="/assets/js/23.712dd5ac.js"><link rel="prefetch" href="/assets/js/24.77ae5052.js"><link rel="prefetch" href="/assets/js/25.e95f81fb.js"><link rel="prefetch" href="/assets/js/26.82cdd880.js"><link rel="prefetch" href="/assets/js/27.427a5aec.js"><link rel="prefetch" href="/assets/js/28.e245952d.js"><link rel="prefetch" href="/assets/js/29.50596e31.js"><link rel="prefetch" href="/assets/js/3.4f4335cf.js"><link rel="prefetch" href="/assets/js/30.016e73a0.js"><link rel="prefetch" href="/assets/js/31.fb0b0b40.js"><link rel="prefetch" href="/assets/js/32.8e7d8efe.js"><link rel="prefetch" href="/assets/js/33.f05f242b.js"><link rel="prefetch" href="/assets/js/34.893b8c3e.js"><link rel="prefetch" href="/assets/js/35.f98d31b7.js"><link rel="prefetch" href="/assets/js/36.6a5744a0.js"><link rel="prefetch" href="/assets/js/37.67e8976d.js"><link rel="prefetch" href="/assets/js/38.2d8447e0.js"><link rel="prefetch" href="/assets/js/39.3b3fde85.js"><link rel="prefetch" href="/assets/js/4.93e1dc89.js"><link rel="prefetch" href="/assets/js/40.8cde36eb.js"><link rel="prefetch" href="/assets/js/41.9df0f821.js"><link rel="prefetch" href="/assets/js/42.c9f1a26b.js"><link rel="prefetch" href="/assets/js/43.fa088c07.js"><link rel="prefetch" href="/assets/js/44.121055e3.js"><link rel="prefetch" href="/assets/js/45.7995c3a0.js"><link rel="prefetch" href="/assets/js/46.17d53a2e.js"><link rel="prefetch" href="/assets/js/47.4a374966.js"><link rel="prefetch" href="/assets/js/48.733e5b6c.js"><link rel="prefetch" href="/assets/js/49.0fb92742.js"><link rel="prefetch" href="/assets/js/5.f52855e6.js"><link rel="prefetch" href="/assets/js/50.50fc5031.js"><link rel="prefetch" href="/assets/js/51.69d8d52a.js"><link rel="prefetch" href="/assets/js/52.d84cedc3.js"><link rel="prefetch" href="/assets/js/53.a64ddaf4.js"><link rel="prefetch" href="/assets/js/54.15e09103.js"><link rel="prefetch" href="/assets/js/55.0f7e8fd5.js"><link rel="prefetch" href="/assets/js/56.6cb5bf13.js"><link rel="prefetch" href="/assets/js/57.d90d9da6.js"><link rel="prefetch" href="/assets/js/58.2c03a905.js"><link rel="prefetch" href="/assets/js/59.02cf613a.js"><link rel="prefetch" href="/assets/js/6.0ff35647.js"><link rel="prefetch" href="/assets/js/60.bb6d2b2f.js"><link rel="prefetch" href="/assets/js/61.ef2abfd3.js"><link rel="prefetch" href="/assets/js/62.b09e5f81.js"><link rel="prefetch" href="/assets/js/63.6ca85ec7.js"><link rel="prefetch" href="/assets/js/64.77eab656.js"><link rel="prefetch" href="/assets/js/65.65b00883.js"><link rel="prefetch" href="/assets/js/66.040b5d23.js"><link rel="prefetch" href="/assets/js/67.23318ab1.js"><link rel="prefetch" href="/assets/js/68.5c29433f.js"><link rel="prefetch" href="/assets/js/69.90978695.js"><link rel="prefetch" href="/assets/js/7.463451e9.js"><link rel="prefetch" href="/assets/js/70.0c585fbd.js"><link rel="prefetch" href="/assets/js/71.120e4ae5.js"><link rel="prefetch" href="/assets/js/72.53bf1e3a.js"><link rel="prefetch" href="/assets/js/73.282f5b35.js"><link rel="prefetch" href="/assets/js/74.4f1cb67d.js"><link rel="prefetch" href="/assets/js/75.f5d3ea1e.js"><link rel="prefetch" href="/assets/js/76.fb173587.js"><link rel="prefetch" href="/assets/js/77.8064b022.js"><link rel="prefetch" href="/assets/js/78.d26f8075.js"><link rel="prefetch" href="/assets/js/79.6cff2fa5.js"><link rel="prefetch" href="/assets/js/8.d5f74857.js"><link rel="prefetch" href="/assets/js/80.29d746c7.js"><link rel="prefetch" href="/assets/js/81.c0a214a2.js"><link rel="prefetch" href="/assets/js/82.f0c93ca2.js"><link rel="prefetch" href="/assets/js/83.db6f55e1.js"><link rel="prefetch" href="/assets/js/84.b0a7a28c.js"><link rel="prefetch" href="/assets/js/85.db7376d4.js"><link rel="prefetch" href="/assets/js/86.96ec3402.js"><link rel="prefetch" href="/assets/js/87.ae41a109.js"><link rel="prefetch" href="/assets/js/88.d83c21c8.js"><link rel="prefetch" href="/assets/js/89.33868490.js"><link rel="prefetch" href="/assets/js/9.2680f96d.js"><link rel="prefetch" href="/assets/js/90.ed48459a.js"><link rel="prefetch" href="/assets/js/91.e1ee23ba.js"><link rel="prefetch" href="/assets/js/92.8b354527.js"><link rel="prefetch" href="/assets/js/93.0682d2e4.js"><link rel="prefetch" href="/assets/js/94.105580aa.js"><link rel="prefetch" href="/assets/js/95.d378d658.js"><link rel="prefetch" href="/assets/js/96.a6460598.js"><link rel="prefetch" href="/assets/js/97.a4cc955f.js"><link rel="prefetch" href="/assets/js/98.9a600d4f.js"><link rel="prefetch" href="/assets/js/99.45007523.js">
    <link rel="stylesheet" href="/assets/css/0.styles.53c04193.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Young's blog" class="logo"> <span class="site-name can-hide">Young's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/Spring/" class="nav-link">Spring</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章1</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/andanyang/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/logo.png"> <div class="blogger-info"><h3>Young</h3> <span></span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/Spring/" class="nav-link">Spring</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章1</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/andanyang/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/Spring_boot/log_compare/" aria-current="page" class="active sidebar-link">手把手教你玩转 SpringBoot 日志比较</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/Spring_boot/log_compare/#日志分级" class="sidebar-link">日志分级</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/Spring_boot/log_compare/#-2" class="sidebar-link"></a></li></ul></li><li class="sidebar-sub-header level2"><a href="/Spring_boot/log_compare/#常用日志插件" class="sidebar-link">常用日志插件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/Spring_boot/log_compare/#-3" class="sidebar-link"></a></li></ul></li><li class="sidebar-sub-header level2"><a href="/Spring_boot/log_compare/#外观模式与-slf4j" class="sidebar-link">外观模式与 SLF4J</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/Spring_boot/log_compare/#-4" class="sidebar-link"></a></li><li class="sidebar-sub-header level4"><a href="/Spring_boot/log_compare/#_1-外观模式" class="sidebar-link">1. 外观模式</a></li><li class="sidebar-sub-header level4"><a href="/Spring_boot/log_compare/#_2-slf4j-的诞生" class="sidebar-link">2. SLF4J 的诞生</a></li><li class="sidebar-sub-header level4"><a href="/Spring_boot/log_compare/#_3-slf4j-的使用" class="sidebar-link">3. SLF4J 的使用</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/Spring_boot/log_compare/#双雄之争" class="sidebar-link">双雄之争</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level4"><a href="/Spring_boot/log_compare/#_1-logback" class="sidebar-link">1. Logback</a></li><li class="sidebar-sub-header level5"><a href="/Spring_boot/log_compare/#_1-引用" class="sidebar-link">1. 引用</a></li><li class="sidebar-sub-header level5"><a href="/Spring_boot/log_compare/#_2-配置" class="sidebar-link">2. 配置</a></li><li class="sidebar-sub-header level5"><a href="/Spring_boot/log_compare/#_3-演示" class="sidebar-link">3. 演示</a></li><li class="sidebar-sub-header level5"><a href="/Spring_boot/log_compare/#_4-细节点" class="sidebar-link">4. 细节点</a></li><li class="sidebar-sub-header level4"><a href="/Spring_boot/log_compare/#_2-log4j-2" class="sidebar-link">2. Log4j 2</a></li><li class="sidebar-sub-header level5"><a href="/Spring_boot/log_compare/#_1-引用-2" class="sidebar-link">1. 引用</a></li><li class="sidebar-sub-header level5"><a href="/Spring_boot/log_compare/#_2-配置-2" class="sidebar-link">2. 配置</a></li><li class="sidebar-sub-header level5"><a href="/Spring_boot/log_compare/#_3-演示-2" class="sidebar-link">3. 演示</a></li><li class="sidebar-sub-header level4"><a href="/Spring_boot/log_compare/#_3-对比" class="sidebar-link">3. 对比</a></li><li class="sidebar-sub-header level5"><a href="/Spring_boot/log_compare/#配置遍历性" class="sidebar-link">配置遍历性</a></li><li class="sidebar-sub-header level5"><a href="/Spring_boot/log_compare/#功能性" class="sidebar-link">功能性</a></li><li class="sidebar-sub-header level5"><a href="/Spring_boot/log_compare/#性能" class="sidebar-link">性能</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/Spring_boot/log_compare/#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/Spring_boot/LogBack/" class="sidebar-link">Springboot [日志管理LogBack]</a></li><li><a href="/springboot/Spring_Transaction_failure/" class="sidebar-link">【Spring】事务失效的场景</a></li><li><a href="/springboot/mysql_excel/" class="sidebar-link">excel百万数据如何导入导出</a></li><li><a href="/interview/Introduce_project_experience/" class="sidebar-link">如何介绍自己的项目经验？</a></li><li><a href="/Spring_boot/Multithreaded_transaction_rollback_processing/" class="sidebar-link">多线程事务回滚的处理</a></li><li><a href="/springboot/Actuator/" class="sidebar-link">SpringBoot 监控神器——Actuator 保姆级教程</a></li><li><a href="/pages/fcabaf/" class="sidebar-link">什么是多租户架构？</a></li><li><a href="/Spring_boot/MybatisPlus_Transaction /" class="sidebar-link">小心 MybatisPlus 的一个坑与面试题 Transaction rolled back because it has been marked as rollback-only</a></li><li><a href="/springboot/f63cbe/" class="sidebar-link">SpringBoot 插件化开发模式详细总结</a></li><li><a href="/Spring_boot/cas/" class="sidebar-link">CAS 单点登录概念</a></li><li><a href="/Spring_boot/read_cinfog/" class="sidebar-link">SpringBoot读配置的6种方式</a></li><li><a href="/Spring_boot/nacos_restart/" class="sidebar-link">阿里二面：使用 Nacos 做注册中心怎么做优雅发布？</a></li><li><a href="/Spring_boot/dist-bc/" class="sidebar-link">分布式系统的补偿机制！</a></li><li><a href="/Spring_boot/jiaguo/" class="sidebar-link">复杂业务系统的架构思路！</a></li><li><a href="/Spring_boot/RocketMQ_5.0/" class="sidebar-link">解读 RocketMQ 5.0 全新的高可用设计</a></li><li><a href="/Spring_boot/Spring_Transaction/" class="sidebar-link">Spring事务详解</a></li><li><a href="/Spring_boot/MetaQ_RocketMQ/" class="sidebar-link">一文总结 MetaQ/RocketMQ 原理</a></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=Spring%20boot" title="分类" data-v-06225672>Spring boot</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/andanyoung" target="_blank" title="作者" class="beLink" data-v-06225672>andanyang</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-10-04</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">手把手教你玩转 SpringBoot 日志比较<!----></h1>  <div class="theme-vdoing-content content__default"><blockquote><p>https://blog.csdn.net/u011709538/article/details/132363370</p></blockquote> <p><strong>程序中的日志重要吗？</strong></p> <p>在回答这个问题前，笔者先说个事例：</p> <blockquote><p>笔者印象尤深的就是去年某个同事，收到了客户反馈的紧急 bug。尽管申请到了日志文件，但因为很多关键步骤没有打印日志，导致排查进度很慢，数个小时都没能排查到问题，也无法给出解决对策。导致了客户程序一直阻断，最终产生了不少损失。事后，经过仔细推敲，成功复现了这个 bug，其实是一个很不起眼的数据转换导致的。可因为日志内容的匮乏，排查起来难度很大。其实只要在数据转换前后进行日志输出，这个问题就是一眼的事。但可惜没如果，故事的最后，开发部门还是遭到了客户的投诉，影响到了部门绩效。</p></blockquote> <p>对于刚学习编程的同学，很多人都对日志满不在乎，我们在做 code review 的时候，经常发现一些新同学喜欢一个方法写得很长，然后中间的注释和日志都少的可怜。</p> <p>坦白的说，这是很不好的习惯，这意味着日后方法出了 bug，或者需要迭代，要花费大量时间来理清方法的思路。千万别迷信什么“方法名、字段名起的见明知意，就可以不写注释与日志”，那是他们的业务场景不够复杂。以笔者为例，复杂的场景涉及很多公式、奇特的规定，不写注释与日志，后续没人能维护得了</p> <p>所以请务必记住，日志在开发过程中非常重要。它可以帮助开发人员了解程序中发生了什么，以及在某些情况下为什么会发生错误或异常。通过查看日志，开发人员可以轻松地定位并解决问题，并且可以更好地监控和调整应用程序的性能，在必要时进行故障排除和安全检查</p> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/tJdrRlG3mibzAAIZ4bZGlic1m4NB0uH7ib04oVmskFsNjtehWPcmjALicFuH9sN9rBfdiaib0TMfPOdhyDAxialPibKfBQ/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p> <h3 id=""><a href="#" class="header-anchor">#</a></h3> <h2 id="日志分级"><a href="#日志分级" class="header-anchor">#</a> 日志分级</h2> <h3 id="-2"><a href="#-2" class="header-anchor">#</a></h3> <p>最开始的日志分级是由 Syslog 的开发者 Eric Allman 在 1981 年提出的。之后，这个级别分级系统被广泛应用于各种领域的日志记录和信息处理中。下面我们就来介绍下常用的日志等级</p> <ul><li><p><strong>TRACE</strong></p> <p>是最低级别的日志记录，用于输出最详细的调试信息，通常用于开发调试目的。在生产环境中，应该关闭 TRACE 级别的日志记录，以避免输出过多无用信息。</p></li> <li><p><strong>DEBUG</strong></p> <p>是用于输出程序中的一些调试信息，通常用于开发过程中。像 TRACE 一样，在生产环境中应该关闭 DEBUG 级别的日志记录。</p></li> <li><p><strong>INFO</strong></p> <p>用于输出程序正常运行时的一些关键信息，比如程序的启动、运行日志等。通常在生产环境中开启 INFO 级别的日志记录。</p></li> <li><p><strong>WARN</strong></p> <p>是用于输出一些警告信息，提示程序可能会出现一些异常或者错误。在应用程序中，WARN 级别的日志记录通常用于记录一些非致命性异常信息，以便能够及时发现并处理这些问题。</p></li> <li><p><strong>ERROR</strong></p> <p>是用于输出程序运行时的一些错误信息，通常表示程序出现了一些不可预料的错误。在应用程序中，ERROR 级别的日志记录通常用于记录一些致命性的异常信息，以便能够及时发现并处理这些问题。</p></li></ul> <p>当然，除了这五种级别以外，还有一些日志框架定义了其他级别，例如 Python 中的 CRITICAL、PHP 中的 FATAL 等。CRITICAL 和 FATAL 都是用于表示程序出现了致命性错误或者异常，即不可恢复的错误。当然，对于我们今天要说的内容，知道上述五种日志等级就够了。</p> <h2 id="常用日志插件"><a href="#常用日志插件" class="header-anchor">#</a> 常用日志插件</h2> <h3 id="-3"><a href="#-3" class="header-anchor">#</a></h3> <ol><li><p><strong>Log4j（1999 年诞生）</strong></p> <p>Log4j 是 Java 领域中最早的流行日志框架之一。它由 Ceki Gülcü 开发，并后来由 Apache 软件基金会接管。Log4j 提供了灵活的配置选项、多种输出目的地、日志级别和分层日志体系。尽管 Log4j 1 在其时代取得了巨大的成功，但在性能和某些功能方面存在限制，因此后来演化为 Log4j 2。</p></li> <li><p><strong>SLF4J（2004 年诞生）</strong></p> <p>严格来说，SLF4J（Simple Logging Facade for Java）并不算一个插件，而是 Ceki Gülcü 开发的一个日志门面接口。它为 Java 应用程序提供了统一的日志抽象，使开发人员可以使用一致的 API 进行日志记录，而不需要直接依赖于特定的日志实现。SLF4J 可以与多种底层日志框架（如 Logback、Log4j 2、java.util.logging 等）结合使用。</p></li> <li><p><strong>Logback（2009 年诞生）</strong></p> <p>Logback 是 Ceki Gülcü 开发的日志框架，他也是 Log4j 的作者。Logback 是 Log4j 1 的后续版本，旨在提供更高性能、更灵活的配置和现代化的日志解决方案。Logback 支持异步日志记录、多种输出格式、灵活的配置以及与 SLF4J 紧密集成。</p></li> <li><p><strong>Log4j 2（2014 年诞生）</strong></p> <p>Log4j 2 是 Apache 软件基金会开发的 Log4j 的下一代版本。它引入了许多新特性，如异步日志记录、插件支持、丰富的过滤器等，旨在提供更好的性能和灵活性。Log4j 2 在设计上考虑了 Log4j 1 的局限性，并且支持多种配置方式。</p></li> <li><p><strong>小故事</strong></p> <p>不难注意到，一个有意思的小故事是，前三款日志插件都是 Ceki Gülcü 开发的，但 Log4j 2 并不是，虽然现在有很多人以为 log4j2 也是他写的，但我们在 github 上可以看到其个人说明 “Unaffiliated with log4j 2.x.” （与 log4j 2.x 无关），所以 log4j2 和 logback 都自称是 log4j 的后续版本，到底谁才算正统续作呢？这就留给各位读者自己玩味了</p> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/tJdrRlG3mibzAAIZ4bZGlic1m4NB0uH7ib0pYfeicVt8Micichpn8Cmll6T0bH9IBuSRHBqruz620WopBbwr2BcHQ9Wg/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p></li></ol> <h2 id="外观模式与-slf4j"><a href="#外观模式与-slf4j" class="header-anchor">#</a> 外观模式与 SLF4J</h2> <h3 id="-4"><a href="#-4" class="header-anchor">#</a></h3> <p>在讲解更多插件详情之前，我们先来看看使用最多的 SLF4J ，我们前面说了 SLF4J（Simple Logging Facade for Java）是 Ceki Gülcü 开发的一个日志门面接口，那么很显然这里就用到了门面模式（即 Facade 或 外观模式），笔者比较习惯说成是外观模式，后续就称为外观模式。</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbucUibY4lxlxBZRgyPiciaiaOA9o3HDAAlbHeX4aFUjDnL4I72VJY6hvMrQODm1YDiacB2NZIRDoE1osYPQ/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p> <h4 id="_1-外观模式"><a href="#_1-外观模式" class="header-anchor">#</a> 1. 外观模式</h4> <p>定义：外观模式是一种结构型设计模式，它提供了一个简单的接口，封装了底层复杂的子系统，使得客户端可以更方便地使用这个子系统</p> <p>目的：外观模式的目的是隐藏底层系统的复杂性，降低访问成本。</p> <p>如果说看定义有些抽象，那我们可以以生活中的例子来说，我们都知道现在越来越流行智能家居，也就是家庭内装了很多智能家电，从电视、空调、到廊灯甚至窗帘都是智能的。这类家庭往往会有一个控制中心，我们不需要手动去开电视，只需要对着控制中心说：“小 A 小 A，帮我打开电视，音量调到 30%”，电视就会应声打开并调节音量</p> <p>那么这样的话，我们不需要知道怎么开电视，怎么调音量。通通都能用最简单的话语来调节。同理，现在手机上的拍照功能：感光度，对焦，白平衡这些细节都给你自动完成了，所以这些复杂的内容你现在根本不用管，只需要猛按拍照键即可。</p> <p>[<img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbucUibY4lxlxBZRgyPiciaiaOA9oJxM7vWayVQ9Hxmdwh3x80k0PR85Bf9JGHGtWOYju88ibefhEbRrkxTQ/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片">](https://mp.weixin.qq.com/s?__biz=MzAwMTE3MDY4MQ==&amp;mid=2652471769&amp;idx=1&amp;sn=0de43ddc60b5a5edcc42c1d89fb89ad5&amp;chksm=8130ec4fb64765593c4089b1093d3a8d33cd4f9faafd84a4e869ae8644ac9865f35db98e182b&amp;scene=21&amp;sessionid=1695167484&amp;subscene=227&amp;clicktime=1695167485&amp;enterid=1695167485&amp;key=3f5bd6a69551b0ebcae63fe36e52f3e95df72a2d00b5e171ad88d4ccfbd28e2dfd3688aacc5c6609ea6ef82a11e1c922909c783d6bdfa3f839c461bea722e2ee0a61690f7676b9fd1d5dc4d63c6bcded7a05c9b0d4363e31ec2d9dff2a1f00346a7e10d6b227b4fb78afc1703935d45146341ae15a878bbfc930577b573921f3&amp;ascene=0&amp;uin=MzE1NzQ0MzM1Mw==&amp;devicetype=Windows 11 x64&amp;version=63090719&amp;lang=zh_CN&amp;exportkey=n_ChQIAhIQamjc jHV5UCVhnmVeDnuHhLgAQIE97dBBAEAAAAAAJVxEwzuH90AAAAOpnltbLcz9gKNyK89dVj0xKPgm9pC8MRqtOVbEblE5H9PSAAEBiuJKUNVvv6jG/ONplmV2Gmuptx10ybVZ31DBXoMLH8wI OJwmFmC xhdjudg7/nrq8dk4kT7PxenQDXOCngO/D1lIIYiPkD5RHQakDpgiXQnlp1/zJR72/rg IDH/382ed01grDm6RdpLv0oulZ4bBCq5Nx7l9nH94IR/15yCHwVCqWUrCIIlnp70lZ0KuIhFupS7YlVf6savpCvh9Yeu2AvDlp&amp;acctmode=0&amp;pass_ticket=B5Hru2kjWOZKlqeCak4x/KNAqe6kTJpAeWlers8wPMrKn3 GCCmV7RUg6NUidYPR&amp;wx_header=1&amp;fasttmpl_type=0&amp;fasttmpl_fullversion=6863594-zh_CN-zip&amp;fasttmpl_flag=1#wechat_redirect)</p> <p>这就是外观模式的意义，<strong>外观模式就是为了隐藏系统的复杂性而设计出来的，让客户端只对接触到一个外观类，而不会接触到系统内部的复杂逻辑</strong></p> <h4 id="_2-slf4j-的诞生"><a href="#_2-slf4j-的诞生" class="header-anchor">#</a> 2. SLF4J 的诞生</h4> <p>在早期使用日志框架时，应用程序通常需要直接与具体的日志框架进行耦合，这就导致了以下几个问题：</p> <ul><li><strong>代码依赖性</strong></li></ul> <p>应用程序需要直接引用具体的日志框架，从而导致代码与日志框架强耦合，难以满足应用程序对日志框架的灵活配置。</p> <ul><li><strong>日志框架不统一</strong></li></ul> <p>在使用不同的日志框架时，应用程序需要根据具体的日志框架来编写代码，这不仅会增加开发难度，而且在多种日志框架中切换时需要进行大量的代码改动。</p> <ul><li><strong>性能问题</strong></li></ul> <p>在日志输出频繁的情况下，由于日志框架的实现方式和 API 设计不同，可能会导致性能问题。</p> <p>为了解决这些问题，SLF4J 提供了一套通用的日志门面接口，让应用程序可以通过这些接口来记录日志信息，而不需要直接引用具体的日志框架。这样，应用程序就可以在不同的日志框架之间进行灵活配置和切换，同时还可以获得更好的性能表现。所以，我强烈建议各位使用 SLF4J， 而不是直接对接某个具体的日志框架。</p> <h4 id="_3-slf4j-的使用"><a href="#_3-slf4j-的使用" class="header-anchor">#</a> 3. SLF4J 的使用</h4> <p>首先，我们需要在工程内引入包，但是如果你用了 springboot，各种 spring-boot-starter 启动器已经引用过了，所以引用前最好确认下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;dependency&gt;
  &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
  &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
  &lt;version&gt;1.7.32&lt;/version&gt;
&lt;/dependency&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>然后在我们要打印日志的类里加上一行 ；private static final Logger logger = LoggerFactory.getLogger(XXXX.class); 即可使用，如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class MyClass {
    private static final Logger log = LoggerFactory.getLogger(MyClass.class);
    //...
    public static void main(String[] args) {
        log.info(&quot;This is an info message.&quot;);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>如果我们引用了 lombok 的话，也可以使用 lombok 的注解@Slf4j 代替上面那句话来使用 SLF4J ，如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import lombok.extern.slf4j.Slf4j;

@Slf4j
public class MyClass {
    public static void main(String[] args) {
        log.info(&quot;This is an info message.&quot;);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>但是，我们都知道 SLF4J 仅仅是个门面，换句话说，仅有接口而没有实现，如果此刻我们直接运行，打印日志是没有用处的</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbucUibY4lxlxBZRgyPiciaiaOA9oInORLNiaH8ckzcickWQWmYnnw884tAfv6HciaZwOalTdX4oOV90BUnZxg/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p> <p>所以，我们如果要运行，我们必须要给 SLF4J 安排上实现，而目前最常用的就是 logback 和 log4j2 了，就让我们接着往下看</p> <h2 id="双雄之争"><a href="#双雄之争" class="header-anchor">#</a> 双雄之争</h2> <p>其实关于 Logback 和 Log4j 2，网络上有很多评测，就不需赘述了，主要是围绕性能方面的，从目前大家的反馈看，Log4j 2 晚出现好几年，还是有后发优势的，性能会比 Logback 好。当然， Logback 本身性能也很强，对于大多数场景，完全是够用的，而且配置比较直观，是 spring-boot 默认使用的日志插件。</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbucUibY4lxlxBZRgyPiciaiaOA9oU0eyzpJkgauZ1pX4RHNRfaCicmlTcm3HHBgjYkABSibhPmpAlhx15cpA/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p> <p>所以，选谁都可以，如果不想费神，可以直接使用 spring-boot 自带的 Logback，如果对日志性能要求很高，使用 log4j2 更保险，我们接下来分别介绍两者。</p> <h4 id="_1-logback"><a href="#_1-logback" class="header-anchor">#</a> 1. Logback</h4> <h5 id="_1-引用"><a href="#_1-引用" class="header-anchor">#</a> 1. 引用</h5> <p>由于 Logback 为 spring-boot 默认日志框架，所以无需再引用，但对于非 spring - boot 项目，可以做如下引用</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;dependency&gt;
    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;
    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;
    &lt;version&gt;1.2.12&lt;/version&gt;
&lt;/dependency&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Logback 的核心模块为 logback-classic，它提供了一个 SLF4J 的实现，兼容 Log4j API，可以无缝地替换 Log4j。它自身已经包含了 logback-core 模块，而 logback-core，顾名思义就是 logback 的核心功能，包括日志记录器、Appender、Layout 等。其他 logback 模块都依赖于该模块</p> <h5 id="_2-配置"><a href="#_2-配置" class="header-anchor">#</a> 2. 配置</h5> <p>logback 可以通过 XML 或者 Groovy 配置。下面以 XML 配置为例。logback 的 XML 配置文件名称通常为 logback.xml 或者 logback-spring.xml（在 Spring Boot 中），需要放置在 classpath 的根目录下，</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration&gt;
    &lt;!--定义日志文件的存储地址，使用Spring的属性文件配置方式--&gt;
    &lt;springProperty scope=&quot;context&quot; name=&quot;log.home&quot; source=&quot;log.home&quot; defaultValue=&quot;logs&quot;/&gt;

    &lt;!--定义日志文件的路径--&gt;
    &lt;property name=&quot;LOG_PATH&quot; value=&quot;${log.home}&quot;/&gt;

    &lt;!--定义控制台输出--&gt;
    &lt;appender name=&quot;console&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;%-5relative [%thread] %-5level %logger{35} - %msg%n&lt;/pattern&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;!--定义 INFO 及以上级别信息输出到控制台--&gt;
    &lt;root level=&quot;INFO&quot;&gt;
        &lt;appender-ref ref=&quot;console&quot;/&gt;
    &lt;/root&gt;

    &lt;!--定义所有组件的日志级别，如所有 DEBUG--&gt;
    &lt;logger name=&quot;com.example&quot; level=&quot;DEBUG&quot;/&gt;

    &lt;!-- date 格式定义 --&gt;
    &lt;property name=&quot;LOG_DATEFORMAT&quot; value=&quot;yyyy-MM-dd&quot;/&gt;

    &lt;!-- 定义日志归档文件名称格式，每天生成一个日志文件 --&gt;
    &lt;property name=&quot;ARCHIVE_PATTERN&quot; value=&quot;${LOG_PATH}/%d{${LOG_DATEFORMAT}}/app-%d{${LOG_DATEFORMAT}}-%i.log.gz&quot;/&gt;

    &lt;!--定义文件输出，会根据定义的阈值进行切割，支持自动归档压缩过期日志--&gt;
    &lt;appender name=&quot;file&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
        &lt;file&gt;${LOG_PATH}/app.log&lt;/file&gt;
        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;
            &lt;!--定义日志文件切割的阈值，本例是 50MB--&gt;
            &lt;maxFileSize&gt;50MB&lt;/maxFileSize&gt;
            &lt;!--定义日志文件保留时间，本例是每天生成一个日志文件--&gt;
            &lt;fileNamePattern&gt;${ARCHIVE_PATTERN}&lt;/fileNamePattern&gt;
            &lt;maxHistory&gt;30&lt;/maxHistory&gt;
            &lt;!-- zip 压缩生成的归档文件 --&gt;
            &lt;timeBasedFileNamingAndTriggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt;
                &lt;maxFileSize&gt;50MB&lt;/maxFileSize&gt;
            &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;
            &lt;!-- 删除过期文件 --&gt;
            &lt;cleanHistoryOnStart&gt;true&lt;/cleanHistoryOnStart&gt;
        &lt;/rollingPolicy&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{35} - %msg%n&lt;/pattern&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;!--定义 ERROR 级别以上信息输出到文件--&gt;
    &lt;logger name=&quot;com.example.demo&quot; level=&quot;ERROR&quot; additivity=&quot;false&quot;&gt;
        &lt;appender-ref ref=&quot;file&quot;/&gt;
    &lt;/logger&gt;

    &lt;!--异步输出日志信息--&gt;
    &lt;appender name=&quot;asyncFile&quot; class=&quot;ch.qos.logback.classic.AsyncAppender&quot;&gt;
        &lt;discardingThreshold&gt;0&lt;/discardingThreshold&gt;
        &lt;queueSize&gt;256&lt;/queueSize&gt;
        &lt;appender-ref ref=&quot;file&quot;/&gt;
    &lt;/appender&gt;

    &lt;!--定义INFO及以上级别信息异步输出到文件--&gt;
    &lt;logger name=&quot;com.example&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt;
        &lt;appender-ref ref=&quot;asyncFile&quot;/&gt;
    &lt;/logger&gt;

&lt;/configuration&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br></div></div><p>其中，主要包括以下配置：</p> <ul><li><strong>springProperty</strong> 定义了 log 文件的存储路径，可以通过 Spring 的属性文件配置方式进行设置，如果没有配置则默认存储在 logs 目录下。</li> <li><strong>appender</strong> 定义了日志输出的目标，这里包括了控制台输出和文件输出两种，具体可以根据需求进行配置。</li> <li><strong>root</strong> 定义了默认的日志级别和输出目标，默认情况下，INFO 级别以上的日志信息会输出到控制台，可以根据实际需求进行修改。</li> <li><strong>logger</strong> 定义了不同组件的日志级别和输出目标，例如，这里定义了 com.example 这个组件的日志级别为 DEBUG，而 com.example.demo 这个组件的日志级别为 ERROR，并将其输出到文件中。</li> <li><strong>rollingPolicy</strong> 定义了日志文件的切割规则和归档策略，此处定义了日志文件每个 50MB 进行切割，每天生成一个日志文件，并且压缩和删除过期文件，最多保留 30 天的日志文件。</li> <li><strong>encoder</strong> 定义了日志信息的输出格式，具体的格式可以自行定义。</li> <li><strong>asyncAppender</strong> 定义了异步输出日志的方式，对于高并发时，可以使用异步输出来提高系统的性能。</li> <li><strong>discardingThreshold</strong> 定义了异步输出队列的阈值，当队列中的数据量超过此值时，会丢弃最早放入的数据，此处设置为 0 表示队列不会丢弃任何数据。</li> <li><strong>queueSize</strong> 定义了异步输出队列的大小，当队列满时，会等待队列中的数据被消费后再将数据放入队列中，此处设置为 256。</li></ul> <h5 id="_3-演示"><a href="#_3-演示" class="header-anchor">#</a> 3. 演示</h5> <p>我们新建一个普通工程（非 spring 工程），引用 Logback 后，把上述配置文件复制进 logback.xml，然后将工程结构设置成如下模式</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbucUibY4lxlxBZRgyPiciaiaOA9oo3RZOQKm7veT0PJ5mXboguPNVLBx7f4ea6M8GBAuXNA3kqQuFGLWMA/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p> <p>其中两个类的代码如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class Main {
    private static final Logger log = LoggerFactory.getLogger(Main.class);
    public static void main(String[] args) {
        log.trace(&quot;This is a Main trace message.&quot;);
        log.debug(&quot;This is a Main debug message.&quot;);
        log.info(&quot;This is a Main info message.&quot;);
        log.warn(&quot;This is a Main warn message.&quot;);
        log.error(&quot;This is a Main error message.&quot;);
        Slave.main(args);
    }
}

public class Slave {
    private static final Logger log = LoggerFactory.getLogger(Slave.class);
    public static void main(String[] args) {
        log.trace(&quot;This is a Slave trace message.&quot;);
        log.debug(&quot;This is a Slave debug message.&quot;);
        log.info(&quot;This is a Slave info message.&quot;);
        log.warn(&quot;This is a Slave warn message.&quot;);
        log.error(&quot;This is a Slave error message.&quot;);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>我们想实现这样的效果，首先日志要同时 输出到控制台 及 日志文件，且不同层级的代码，输出的日志层级也不同。那么我们可以对上述的 xml 做出一些调整：</p> <p>因为是非 Spring 项目，所以 springProperty 这样的标签就不要用了，我们直接写死一个日志文件地址即可。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;!--定义日志文件的路径--&gt;
&lt;property name=&quot;LOG_PATH&quot; value=&quot;D://logs/log&quot;/&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>去掉原有的那些 root、logger 标签，我们自己新建两个 logger，用于两个不同的层级。我们想里层输出 debug 级别，外层输出 info 级别，我们可以这么设置。并且同时输出到控制台及日志文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;logger name=&quot;com.zhanfu&quot; level=&quot;INFO&quot;&gt;
    &lt;appender-ref ref=&quot;file&quot; /&gt;
    &lt;appender-ref ref=&quot;console&quot;/&gt;
&lt;/logger&gt;
&lt;logger name=&quot;com.zhanfu.child&quot; level=&quot;DEBUG&quot; additivity=&quot;false&quot;&gt;
    &lt;appender-ref ref=&quot;file&quot; /&gt;
    &lt;appender-ref ref=&quot;console&quot;/&gt;
&lt;/logger&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>当我们运行 Main.main 的时候，就可以得到以下日志，slave 能输出 debug 级别，Main 只能输出 info 及以上级别</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbucUibY4lxlxBZRgyPiciaiaOA9oPxSQBuENGHChyUfM542sZoTL13ibVCg2ngjVTvfrxXyJc5kYLoIrUQw/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p> <h5 id="_4-细节点"><a href="#_4-细节点" class="header-anchor">#</a> 4. 细节点</h5> <p>其实我们上面的演示，有两个细节点，需要注意一下。一个就是我们的</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> &lt;logger name=&quot;com.zhanfu.child&quot; level=&quot;DEBUG&quot; additivity=&quot;false&quot;&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用了一个 additivity=&quot;false&quot; 的属性，这其实是因为 logger 这个标签在锁定某个目录时，可能会发生层级关系。比如我们的两个 logger， 一个针对的目录是 com.zhanfu 另一个是 com.zhanfu.child ，后者就会被前者包含。</p> <p>当我们的 com.zhanfu.child.Slave 打印日志时，当然会使用后者（更精确）的设置，但前者的设置还使用吗？就依赖于 additivity=“false”，此处如果我们把 additivity=&quot;false&quot; (该属性默认值为 true)去掉，再来打印日志</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbucUibY4lxlxBZRgyPiciaiaOA9o4zEgYCT5R4g58KDaKVeEGMyCDnLU1PiceV5EkSnuokHJ7iaz9IzEogyQ/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p> <p>就会发现，Slave 的日志打了两遍，而且连 debug 级别的都打了两遍，我们可以把这种逻辑理解为继承，子类执行一遍，父类还能在执行一遍，但 leve 属性还是会采用子类而非父类的。</p> <p>另一点就是我们把 root 标签删除了，root 其实是一个顶级的 logger , 其他的 logger 都可以视为它的子类，如果那些 logger 存在没涵盖的地方，或其没有指定 additivity=&quot;false&quot; ，那最后 root 的设置就会被使用。比如我们将设置改为如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;logger name=&quot;com.zhanfu&quot; level=&quot;INFO&quot;&gt;
    &lt;appender-ref ref=&quot;file&quot; /&gt;
    &lt;appender-ref ref=&quot;console&quot;/&gt;
&lt;/logger&gt;
&lt;logger name=&quot;com.zhanfu.child&quot; level=&quot;DEBUG&quot;&gt;
    &lt;appender-ref ref=&quot;file&quot; /&gt;
    &lt;appender-ref ref=&quot;console&quot;/&gt;
&lt;/logger&gt;
&lt;root level=&quot;WARN&quot;&gt;
    &lt;appender-ref ref=&quot;console&quot;/&gt;
&lt;/root&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>结果控制台的输出日志，Main 会重复两次，Slave 会重复三次，如下</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbucUibY4lxlxBZRgyPiciaiaOA9oqu3m9ECXpticUkibiblib3QkPSTbPmZQpplyC68icMtrBW2OtN8hDB5Eb8w/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p> <p>但是因为我们的 root 只配置了控制台输出，所以日志文件里还是不会变的</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbucUibY4lxlxBZRgyPiciaiaOA9ooicaA9b2h4jxNG1RxworfXNoWjKF8nLAV3gGhocV5dxKDl5QEjrbZGQ/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p> <h4 id="_2-log4j-2"><a href="#_2-log4j-2" class="header-anchor">#</a> 2. Log4j 2</h4> <h5 id="_1-引用-2"><a href="#_1-引用-2" class="header-anchor">#</a> 1. 引用</h5> <p>对于 spring-boot 项目，除了引用 Log4j 2 我们还需要先剔除 Logback 的引用，对于普通项目，我们只需直接引用即可。但注意我们的原则，通过 SLF4J 来使用 Log4j2，所以引用下面这个包</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;dependency&gt;
     &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
     &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;
     &lt;version&gt;2.13.3&lt;/version&gt;
&lt;/dependency&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>其内包含 Log4j2 的实现，和 SLF4J 的 API，如下：</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbucUibY4lxlxBZRgyPiciaiaOA9owF0g9obmWtANQZPGPS9ugiab2HtUV2jt2DDOPwv6JU7sURJZvicJS2Lw/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p> <h5 id="_2-配置-2"><a href="#_2-配置-2" class="header-anchor">#</a> 2. 配置</h5> <p>Log4j2 的配置逻辑和 logback 是类似的，只有些细节不同，比如 Logger 的首字母大写等等，最后我们写下这样一个 log4j2.xml</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;INFO&quot; monitorInterval=&quot;30&quot;&gt;
  &lt;Properties&gt;
    &lt;Property name=&quot;logPath&quot;&gt;logs&lt;/Property&gt;
  &lt;/Properties&gt;
  &lt;Appenders&gt;
    &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;
      &lt;PatternLayout pattern=&quot;%d{ISO8601} [%t] %-5level %logger{36} - %msg%n&quot; /&gt;
    &lt;/Console&gt;
    &lt;RollingFile name=&quot;File&quot; fileName=&quot;${logPath}/example.log&quot;
                 filePattern=&quot;${logPath}/example-%d{yyyy-MM-dd}-%i.log&quot;&gt;
      &lt;PatternLayout pattern=&quot;%d{ISO8601} [%t] %-5level %logger{36} - %msg%n&quot;/&gt;
      &lt;Policies&gt;
        &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;
      &lt;/Policies&gt;
      &lt;DefaultRolloverStrategy max=&quot;4&quot;/&gt;
    &lt;/RollingFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Logger name=&quot;com.zhanfu.child&quot; level=&quot;DEBUG&quot;&gt;
      &lt;AppenderRef ref=&quot;File&quot;/&gt;
      &lt;AppenderRef ref=&quot;Console&quot;/&gt;
    &lt;/Logger&gt;
    &lt;Logger name=&quot;com.zhanfu&quot; level=&quot;INFO&quot;&gt;
      &lt;AppenderRef ref=&quot;File&quot;/&gt;
      &lt;AppenderRef ref=&quot;Console&quot;/&gt;
    &lt;/Logger&gt;
    &lt;Root level=&quot;WARN&quot;&gt;
      &lt;AppenderRef ref=&quot;Console&quot; /&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><ul><li><strong>Properties</strong></li></ul> <p>部分定义了一个 logPath 属性，方便在其他地方引用。</p> <ul><li><strong>Appenders</strong></li></ul> <p>定义了两个 Appender：Console 和 RollingFile，分别将日志输出到控制台和文件中。RollingFile 使用了 RollingFileAppender，并设置了日志滚动策略和默认的备份文件数量。</p> <ul><li><strong>Loggers</strong></li></ul> <p>定义了三个 Logger：com.zhanfu.child 的日志级别为 DEBUG，com.zhanfu 的日志级别为 INFO，Root Logger 的日志级别为 WARN。并指定了两个 Appender：Console 和 File。</p> <h5 id="_3-演示-2"><a href="#_3-演示-2" class="header-anchor">#</a> 3. 演示</h5> <p>由于我们的配置逻辑没变，所以日志的结果还是一样的：</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbucUibY4lxlxBZRgyPiciaiaOA9od4hYibkD6A2F42ciboyekx8Na0MILOGPzfrhQOibiaiakd6cMMOF9vibJ0icw/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbucUibY4lxlxBZRgyPiciaiaOA9or64zqXhNe9UtGSvbDQcNKlsaQokPJF371yjNgjiavOoJFPRpicCZgefA/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p> <h4 id="_3-对比"><a href="#_3-对比" class="header-anchor">#</a> 3. 对比</h4> <p>Log4j2 和 Logback 都是 Java 应用程序中最流行的日志框架之一。它们均具备高度的可配置性和使用灵活性，并提供了一系列有用的功能，例如异步日志记录和日志过滤等。下面从配置遍历性、功能性、性能等方面进行比较和总结。</p> <h5 id="配置遍历性"><a href="#配置遍历性" class="header-anchor">#</a> 配置遍历性</h5> <p>Logback 的配置文件格式相对简单，易于阅读和修改。它支持符号来引用变量、属性和环境变量等。此外，它还支持条件日志记录（根据日志级别、日志记录器名称或时间等），以及滚动文件的大小或日期等。</p> <p>Log4j2 的配置文件格式较复杂，但它在配置文件中提供了大量的选项来控制日志记录。它支持在配置文件中直接声明上下文参数、过滤器、输出器和 Appender 等，这使得它的配置更加灵活。此外，Log4j2 还支持异步日志记录、日志事件序列化和性能优化等。</p> <p>微信搜索公众号：架构师指南，回复：架构师 领取资料 。</p> <p>总体来说，两者都很好地支持了配置遍历性，但 Log4j2 提供了更多的选项和更高的灵活性。</p> <h5 id="功能性"><a href="#功能性" class="header-anchor">#</a> 功能性</h5> <p>Logback 提供了一系列基本的日志记录功能，例如异步 Appender、滚动文件和 GZIP 压缩等。它还支持与 SLF4J 一起使用，可以很容易地与其他日志框架集成。</p> <p>Log4j2 提供了更多的高级功能，例如异步日志记录、性能优化和日志事件序列化等。它还支持 Lambda 表达式，可以使日志记录器更加简洁和易读。此外，Log4j2 还支持 Flume 和 Kafka 等大数据处理框架，可以方便地将日志记录发送到这些框架中。</p> <p>总体来说，Log4j2 提供了更多的高级功能，并且可以更好地与大数据处理框架集成。</p> <h5 id="性能"><a href="#性能" class="header-anchor">#</a> 性能</h5> <p>Logback 的性能很好，可以处理高吞吐量的日志记录。它采用了异步记录器，利用了多线程来提高性能。</p> <p>Log4j2 在性能方面更加强大。它使用了异步记录器和多线程，还引入了 RingBuffer 数据结构和 Disruptor 库来加速日志事件的传递和处理。这使得它比 Logback 具有更高的吞吐量和更低的延迟。</p> <p><strong>综上所述，Log4j2 在配置灵活性、功能性和性能方面都比 Logback 更为强大。但如果需要轻量级的日志框架或者只需要基本的日志记录功能，Logback 也是一个不错的选择</strong></p> <p>但如果我们同时引用了这两者，会报错吗？还是会使用其中的某一个？</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> &lt;dependency&gt;
    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;
    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;
    &lt;version&gt;1.2.12&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
    &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;
    &lt;version&gt;2.13.3&lt;/version&gt;
&lt;/dependency&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>可以看到，SLF4J 发现了系统中同时存在两个插件框架，并最终选择了使用 Logback</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbucUibY4lxlxBZRgyPiciaiaOA9opQVKbZ4hRbq77uXicJmicnq5bicWPSAian9KdxSXpqHMaojnpbNLEnRH2Q/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>学习完本文，你应当对现在这几个常用框架的有所了解，并能基础应用了。此次我们没有讲源码，也没有深入的讲其配置及进阶使用，这些我们会在后面慢慢学习。但现在我希望你能知道的是。一定要写好日志，一定要写好日志，一定要写好日志。重要的事情说三遍！这是区别新人和老鸟的一个重要依据，也是让自己排查问题更轻松的不二法门！</p> <p>另外，现在很多中间件都自己引用了日志插件，我们作为一个整体工程在使用中间件时，要及时发现并解决插件冲突，避免我们自己的日志配置失效，这也是一个程序员该注意的点。</p></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/andanyang/vuepress-theme-vdoing/edit/master/docs/Spring boot/0001.Spring日志.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/03/11, 02:40:47</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><!----> <a href="/Spring_boot/LogBack/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Springboot [日志管理LogBack]</div></a></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/Spring_boot/LogBack/">Springboot [日志管理LogBack]</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/bigdata/spark/SparkStreaming_Driver_Executer/"><div>
            spark中代码的执行位置（Driver or Executer）
            <!----></div></a> <span class="date">12-12</span></dt></dl><dl><dd>02</dd> <dt><a href="/bigdata/spark/SparkStreaming/"><div>
            大数据技术之 SparkStreaming
            <!----></div></a> <span class="date">12-12</span></dt></dl><dl><dd>03</dd> <dt><a href="/bigdata/spark/sql/"><div>
            Spark 核心编程之 RDD 累加器与广播变量
            <!----></div></a> <span class="date">12-06</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1218853253@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/andanyang" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2024
    <span>Young | <a href="https://github.com/andanyoung/young-blog/blob/master/LICENSE" target="_blank">MIT License</a> <br/> <a  href="https://beian.miit.gov.cn/" target="_blank">浙ICP备20002744号</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.e4caa6db.js" defer></script><script src="/assets/js/2.d1be14c5.js" defer></script><script src="/assets/js/140.bb53ac81.js" defer></script>
  </body>
</html>
