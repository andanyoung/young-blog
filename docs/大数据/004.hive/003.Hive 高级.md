---
title: Hive 高级
date: 2023-10-16 12:14:58
permalink: /bigdata/hive_advanced/
categories:
  - 大数据
  - hive
tags:
  -
author:
  name: andanyang
  link: https://github.com/andanyoung
---
# 第10章 分区表和分桶表

## 10.1 分区表

Hive中的分区就是把一张大表的数据按照业务需要分散的存储到多个目录，每个目录就称为该表的一个分区。在查询时通过where子句中的表达式选择查询所需要的分区，这样的查询效率会提高很多。

### 10.1.1 分区表基本语法

#### 1. 创建分区表

```
hive (default)> 
create table dept_partition
(
    deptno int,    --部门编号
    dname  string, --部门名称
    loc    string  --部门位置
)
    partitioned by (day string)
    row format delimited fields terminated by '\t';
```

#### 2. 分区表读写数据

##### 1）写数据

（1）load
数据准备

在/opt/module/hive/datas/路径上创建文件dept_20220401.log，并输入如下内容。

```
[atguigu@hadoop102 datas]$ vim dept_20220401.log
10	行政部	1700
20	财务部	1800
```

装载语句

```
hive (default)> 
load data local inpath '/opt/module/hive/datas/dept_20220401.log' 
into table dept_partition 
partition(day='20220401');
```

