<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hive入门 | Young&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="Young丶java后端技术博客,专注后端学习与总结。擅长spring boot,JAVA基础总结,等方面的知识,关注spring,架构,elasticsearch,mysql领域.">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.53c04193.css" as="style"><link rel="preload" href="/assets/js/app.e4caa6db.js" as="script"><link rel="preload" href="/assets/js/2.d1be14c5.js" as="script"><link rel="preload" href="/assets/js/25.e95f81fb.js" as="script"><link rel="prefetch" href="/assets/js/10.20449a2b.js"><link rel="prefetch" href="/assets/js/100.f25e73b5.js"><link rel="prefetch" href="/assets/js/101.3180ba9d.js"><link rel="prefetch" href="/assets/js/102.fcd415ea.js"><link rel="prefetch" href="/assets/js/103.522869bb.js"><link rel="prefetch" href="/assets/js/104.5da1e4e4.js"><link rel="prefetch" href="/assets/js/105.e5a40fe8.js"><link rel="prefetch" href="/assets/js/106.627d6279.js"><link rel="prefetch" href="/assets/js/107.606beca1.js"><link rel="prefetch" href="/assets/js/108.100e1cb2.js"><link rel="prefetch" href="/assets/js/109.9765392e.js"><link rel="prefetch" href="/assets/js/11.da3512b5.js"><link rel="prefetch" href="/assets/js/110.b73cf0d9.js"><link rel="prefetch" href="/assets/js/111.3f77dd60.js"><link rel="prefetch" href="/assets/js/112.0c7d547d.js"><link rel="prefetch" href="/assets/js/113.1827c266.js"><link rel="prefetch" href="/assets/js/114.daf1d8a5.js"><link rel="prefetch" href="/assets/js/115.e7dca24d.js"><link rel="prefetch" href="/assets/js/116.11b303de.js"><link rel="prefetch" href="/assets/js/117.203cefba.js"><link rel="prefetch" href="/assets/js/118.61d8527b.js"><link rel="prefetch" href="/assets/js/119.1f959a37.js"><link rel="prefetch" href="/assets/js/12.11f18e06.js"><link rel="prefetch" href="/assets/js/120.c268b7aa.js"><link rel="prefetch" href="/assets/js/121.64318c96.js"><link rel="prefetch" href="/assets/js/122.cbddb70d.js"><link rel="prefetch" href="/assets/js/123.b49b84fb.js"><link rel="prefetch" href="/assets/js/124.392f030b.js"><link rel="prefetch" href="/assets/js/125.45f631c4.js"><link rel="prefetch" href="/assets/js/126.700cc575.js"><link rel="prefetch" href="/assets/js/127.d649cb2a.js"><link rel="prefetch" href="/assets/js/128.bc018411.js"><link rel="prefetch" href="/assets/js/129.d0a74611.js"><link rel="prefetch" href="/assets/js/13.1cb33dc8.js"><link rel="prefetch" href="/assets/js/130.45b1f75c.js"><link rel="prefetch" href="/assets/js/131.45ba93df.js"><link rel="prefetch" href="/assets/js/132.c58bbbd7.js"><link rel="prefetch" href="/assets/js/133.7f53922e.js"><link rel="prefetch" href="/assets/js/134.ddf0d780.js"><link rel="prefetch" href="/assets/js/135.ada3af13.js"><link rel="prefetch" href="/assets/js/136.4097c2be.js"><link rel="prefetch" href="/assets/js/137.fc910ac9.js"><link rel="prefetch" href="/assets/js/138.9628f460.js"><link rel="prefetch" href="/assets/js/139.3125ef74.js"><link rel="prefetch" href="/assets/js/14.1004ce43.js"><link rel="prefetch" href="/assets/js/140.bb53ac81.js"><link rel="prefetch" href="/assets/js/141.a002ac19.js"><link rel="prefetch" href="/assets/js/142.540d19e4.js"><link rel="prefetch" href="/assets/js/143.4cbccfca.js"><link rel="prefetch" href="/assets/js/144.8a217b6a.js"><link rel="prefetch" href="/assets/js/145.9c7bc0de.js"><link rel="prefetch" href="/assets/js/146.3dfd0773.js"><link rel="prefetch" href="/assets/js/147.bc0f0d42.js"><link rel="prefetch" href="/assets/js/148.e0cdc4d5.js"><link rel="prefetch" href="/assets/js/149.8486db6e.js"><link rel="prefetch" href="/assets/js/15.703e8784.js"><link rel="prefetch" href="/assets/js/150.5f3b7fb5.js"><link rel="prefetch" href="/assets/js/151.98a3f202.js"><link rel="prefetch" href="/assets/js/152.2940f2ba.js"><link rel="prefetch" href="/assets/js/153.75f3a085.js"><link rel="prefetch" href="/assets/js/154.fa2da83b.js"><link rel="prefetch" href="/assets/js/155.113be5c8.js"><link rel="prefetch" href="/assets/js/156.0667e7f5.js"><link rel="prefetch" href="/assets/js/157.0b3e5dfa.js"><link rel="prefetch" href="/assets/js/158.a338bdd7.js"><link rel="prefetch" href="/assets/js/159.33c9771c.js"><link rel="prefetch" href="/assets/js/16.71e3d898.js"><link rel="prefetch" href="/assets/js/160.e868c8b3.js"><link rel="prefetch" href="/assets/js/161.cf61955e.js"><link rel="prefetch" href="/assets/js/162.baee00ca.js"><link rel="prefetch" href="/assets/js/163.183cde82.js"><link rel="prefetch" href="/assets/js/164.c1eadef5.js"><link rel="prefetch" href="/assets/js/165.70ee8a24.js"><link rel="prefetch" href="/assets/js/166.8e185ff2.js"><link rel="prefetch" href="/assets/js/167.0881cf57.js"><link rel="prefetch" href="/assets/js/168.88caf424.js"><link rel="prefetch" href="/assets/js/169.e7e984ff.js"><link rel="prefetch" href="/assets/js/17.b0356f05.js"><link rel="prefetch" href="/assets/js/170.c7052d81.js"><link rel="prefetch" href="/assets/js/171.2ab773fd.js"><link rel="prefetch" href="/assets/js/172.0e39f858.js"><link rel="prefetch" href="/assets/js/173.76661218.js"><link rel="prefetch" href="/assets/js/174.0ac9f795.js"><link rel="prefetch" href="/assets/js/175.da30bba2.js"><link rel="prefetch" href="/assets/js/176.0f230688.js"><link rel="prefetch" href="/assets/js/177.040e0937.js"><link rel="prefetch" href="/assets/js/178.68852030.js"><link rel="prefetch" href="/assets/js/179.c998f0ca.js"><link rel="prefetch" href="/assets/js/18.2e77c8d1.js"><link rel="prefetch" href="/assets/js/180.4f6b395f.js"><link rel="prefetch" href="/assets/js/181.577a5325.js"><link rel="prefetch" href="/assets/js/182.6b43cbf2.js"><link rel="prefetch" href="/assets/js/183.cf9e9cca.js"><link rel="prefetch" href="/assets/js/184.f0e76def.js"><link rel="prefetch" href="/assets/js/185.2d3d8eea.js"><link rel="prefetch" href="/assets/js/186.4db71601.js"><link rel="prefetch" href="/assets/js/187.8b6a6829.js"><link rel="prefetch" href="/assets/js/188.4a0b8f41.js"><link rel="prefetch" href="/assets/js/189.0a28241b.js"><link rel="prefetch" href="/assets/js/19.51c97d4c.js"><link rel="prefetch" href="/assets/js/190.5001309c.js"><link rel="prefetch" href="/assets/js/191.42778cf1.js"><link rel="prefetch" href="/assets/js/192.fabd1cb0.js"><link rel="prefetch" href="/assets/js/193.cbc113b8.js"><link rel="prefetch" href="/assets/js/194.4cf24763.js"><link rel="prefetch" href="/assets/js/195.ea5d1afb.js"><link rel="prefetch" href="/assets/js/196.16115ce4.js"><link rel="prefetch" href="/assets/js/197.b90179d1.js"><link rel="prefetch" href="/assets/js/198.456ceb51.js"><link rel="prefetch" href="/assets/js/199.a28de97a.js"><link rel="prefetch" href="/assets/js/20.79989fc4.js"><link rel="prefetch" href="/assets/js/200.72102ac7.js"><link rel="prefetch" href="/assets/js/201.e2b3a297.js"><link rel="prefetch" href="/assets/js/202.d4283e12.js"><link rel="prefetch" href="/assets/js/203.6e5e6596.js"><link rel="prefetch" href="/assets/js/204.363863cf.js"><link rel="prefetch" href="/assets/js/205.d16c5a36.js"><link rel="prefetch" href="/assets/js/206.dc867263.js"><link rel="prefetch" href="/assets/js/207.acfeaaaa.js"><link rel="prefetch" href="/assets/js/208.22c49054.js"><link rel="prefetch" href="/assets/js/209.0f7c526b.js"><link rel="prefetch" href="/assets/js/21.1b619a3f.js"><link rel="prefetch" href="/assets/js/210.b247a678.js"><link rel="prefetch" href="/assets/js/211.fe8629a4.js"><link rel="prefetch" href="/assets/js/212.48b672e5.js"><link rel="prefetch" href="/assets/js/213.08f571a8.js"><link rel="prefetch" href="/assets/js/214.04da1824.js"><link rel="prefetch" href="/assets/js/215.f60b57f4.js"><link rel="prefetch" href="/assets/js/216.4383ceb6.js"><link rel="prefetch" href="/assets/js/217.3b1ce286.js"><link rel="prefetch" href="/assets/js/218.1534ef52.js"><link rel="prefetch" href="/assets/js/219.6901e38c.js"><link rel="prefetch" href="/assets/js/22.349d3a16.js"><link rel="prefetch" href="/assets/js/220.22e0c5ea.js"><link rel="prefetch" href="/assets/js/221.2e7a5a4f.js"><link rel="prefetch" href="/assets/js/222.76b63073.js"><link rel="prefetch" href="/assets/js/223.500a058f.js"><link rel="prefetch" href="/assets/js/224.7f7c1250.js"><link rel="prefetch" href="/assets/js/225.2f183cbe.js"><link rel="prefetch" href="/assets/js/23.712dd5ac.js"><link rel="prefetch" href="/assets/js/24.77ae5052.js"><link rel="prefetch" href="/assets/js/26.82cdd880.js"><link rel="prefetch" href="/assets/js/27.427a5aec.js"><link rel="prefetch" href="/assets/js/28.e245952d.js"><link rel="prefetch" href="/assets/js/29.50596e31.js"><link rel="prefetch" href="/assets/js/3.4f4335cf.js"><link rel="prefetch" href="/assets/js/30.016e73a0.js"><link rel="prefetch" href="/assets/js/31.fb0b0b40.js"><link rel="prefetch" href="/assets/js/32.8e7d8efe.js"><link rel="prefetch" href="/assets/js/33.f05f242b.js"><link rel="prefetch" href="/assets/js/34.893b8c3e.js"><link rel="prefetch" href="/assets/js/35.f98d31b7.js"><link rel="prefetch" href="/assets/js/36.6a5744a0.js"><link rel="prefetch" href="/assets/js/37.67e8976d.js"><link rel="prefetch" href="/assets/js/38.2d8447e0.js"><link rel="prefetch" href="/assets/js/39.3b3fde85.js"><link rel="prefetch" href="/assets/js/4.93e1dc89.js"><link rel="prefetch" href="/assets/js/40.8cde36eb.js"><link rel="prefetch" href="/assets/js/41.9df0f821.js"><link rel="prefetch" href="/assets/js/42.c9f1a26b.js"><link rel="prefetch" href="/assets/js/43.fa088c07.js"><link rel="prefetch" href="/assets/js/44.121055e3.js"><link rel="prefetch" href="/assets/js/45.7995c3a0.js"><link rel="prefetch" href="/assets/js/46.17d53a2e.js"><link rel="prefetch" href="/assets/js/47.4a374966.js"><link rel="prefetch" href="/assets/js/48.733e5b6c.js"><link rel="prefetch" href="/assets/js/49.0fb92742.js"><link rel="prefetch" href="/assets/js/5.f52855e6.js"><link rel="prefetch" href="/assets/js/50.50fc5031.js"><link rel="prefetch" href="/assets/js/51.69d8d52a.js"><link rel="prefetch" href="/assets/js/52.d84cedc3.js"><link rel="prefetch" href="/assets/js/53.a64ddaf4.js"><link rel="prefetch" href="/assets/js/54.15e09103.js"><link rel="prefetch" href="/assets/js/55.0f7e8fd5.js"><link rel="prefetch" href="/assets/js/56.6cb5bf13.js"><link rel="prefetch" href="/assets/js/57.d90d9da6.js"><link rel="prefetch" href="/assets/js/58.2c03a905.js"><link rel="prefetch" href="/assets/js/59.02cf613a.js"><link rel="prefetch" href="/assets/js/6.0ff35647.js"><link rel="prefetch" href="/assets/js/60.bb6d2b2f.js"><link rel="prefetch" href="/assets/js/61.ef2abfd3.js"><link rel="prefetch" href="/assets/js/62.b09e5f81.js"><link rel="prefetch" href="/assets/js/63.6ca85ec7.js"><link rel="prefetch" href="/assets/js/64.77eab656.js"><link rel="prefetch" href="/assets/js/65.65b00883.js"><link rel="prefetch" href="/assets/js/66.040b5d23.js"><link rel="prefetch" href="/assets/js/67.23318ab1.js"><link rel="prefetch" href="/assets/js/68.5c29433f.js"><link rel="prefetch" href="/assets/js/69.90978695.js"><link rel="prefetch" href="/assets/js/7.463451e9.js"><link rel="prefetch" href="/assets/js/70.0c585fbd.js"><link rel="prefetch" href="/assets/js/71.120e4ae5.js"><link rel="prefetch" href="/assets/js/72.53bf1e3a.js"><link rel="prefetch" href="/assets/js/73.282f5b35.js"><link rel="prefetch" href="/assets/js/74.4f1cb67d.js"><link rel="prefetch" href="/assets/js/75.f5d3ea1e.js"><link rel="prefetch" href="/assets/js/76.fb173587.js"><link rel="prefetch" href="/assets/js/77.8064b022.js"><link rel="prefetch" href="/assets/js/78.d26f8075.js"><link rel="prefetch" href="/assets/js/79.6cff2fa5.js"><link rel="prefetch" href="/assets/js/8.d5f74857.js"><link rel="prefetch" href="/assets/js/80.29d746c7.js"><link rel="prefetch" href="/assets/js/81.c0a214a2.js"><link rel="prefetch" href="/assets/js/82.f0c93ca2.js"><link rel="prefetch" href="/assets/js/83.db6f55e1.js"><link rel="prefetch" href="/assets/js/84.b0a7a28c.js"><link rel="prefetch" href="/assets/js/85.db7376d4.js"><link rel="prefetch" href="/assets/js/86.96ec3402.js"><link rel="prefetch" href="/assets/js/87.ae41a109.js"><link rel="prefetch" href="/assets/js/88.d83c21c8.js"><link rel="prefetch" href="/assets/js/89.33868490.js"><link rel="prefetch" href="/assets/js/9.2680f96d.js"><link rel="prefetch" href="/assets/js/90.ed48459a.js"><link rel="prefetch" href="/assets/js/91.e1ee23ba.js"><link rel="prefetch" href="/assets/js/92.8b354527.js"><link rel="prefetch" href="/assets/js/93.0682d2e4.js"><link rel="prefetch" href="/assets/js/94.105580aa.js"><link rel="prefetch" href="/assets/js/95.d378d658.js"><link rel="prefetch" href="/assets/js/96.a6460598.js"><link rel="prefetch" href="/assets/js/97.a4cc955f.js"><link rel="prefetch" href="/assets/js/98.9a600d4f.js"><link rel="prefetch" href="/assets/js/99.45007523.js">
    <link rel="stylesheet" href="/assets/css/0.styles.53c04193.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Young's blog" class="logo"> <span class="site-name can-hide">Young's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/Spring/" class="nav-link">Spring</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章1</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/andanyang/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/logo.png"> <div class="blogger-info"><h3>Young</h3> <span></span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/Spring/" class="nav-link">Spring</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章1</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/andanyang/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Hadoop</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>kafka</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Flume</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>hive</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata/hive_Basic/" aria-current="page" class="active sidebar-link">Hive入门</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/bigdata/hive_Basic/#_1-1-什么是hive" class="sidebar-link">1.1 什么是Hive</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/bigdata/hive_Basic/#_1-hive简介" class="sidebar-link">1）Hive简介</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/bigdata/hive_Basic/#_1-2-hive架构原理" class="sidebar-link">1.2 Hive架构原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/bigdata/hive_Basic/#_1-用户接口-client" class="sidebar-link">1）用户接口：Client</a></li><li class="sidebar-sub-header level3"><a href="/bigdata/hive_Basic/#_2-元数据-metastore" class="sidebar-link">2）元数据：Metastore</a></li><li class="sidebar-sub-header level3"><a href="/bigdata/hive_Basic/#_3-驱动器-driver" class="sidebar-link">3）驱动器：Driver</a></li><li class="sidebar-sub-header level3"><a href="/bigdata/hive_Basic/#_4-hadoop" class="sidebar-link">4）Hadoop</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/bigdata/hive_Basic/#_2-1-hive安装地址" class="sidebar-link">2.1 Hive安装地址</a></li><li class="sidebar-sub-header level2"><a href="/bigdata/hive_Basic/#_2-2-hive安装部署" class="sidebar-link">2.2 Hive安装部署</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/bigdata/hive_Basic/#_2-2-1-安装hive" class="sidebar-link">2.2.1 安装Hive</a></li><li class="sidebar-sub-header level3"><a href="/bigdata/hive_Basic/#_2-2-2-启动并使用hive" class="sidebar-link">2.2.2 启动并使用Hive</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/bigdata/hive_Basic/#_2-3-mysql安装" class="sidebar-link">2.3 MySQL安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/bigdata/hive_Basic/#_2-3-1-安装mysql" class="sidebar-link">2.3.1 安装MySQL</a></li><li class="sidebar-sub-header level3"><a href="/bigdata/hive_Basic/#_2-3-2-配置mysql" class="sidebar-link">2.3.2 配置MySQL</a></li><li class="sidebar-sub-header level3"><a href="/bigdata/hive_Basic/#_2-3-3-卸载mysql说明" class="sidebar-link">2.3.3 卸载MySQL说明</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/bigdata/hive_Basic/#_2-4-配置hive元数据存储到mysql" class="sidebar-link">2.4 配置Hive元数据存储到MySQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/bigdata/hive_Basic/#_2-4-1-配置元数据到mysql" class="sidebar-link">2.4.1 配置元数据到MySQL</a></li><li class="sidebar-sub-header level3"><a href="/bigdata/hive_Basic/#_2-4-2-验证元数据是否配置成功" class="sidebar-link">2.4.2 验证元数据是否配置成功</a></li><li class="sidebar-sub-header level3"><a href="/bigdata/hive_Basic/#_2-4-3-查看mysql中的元数据" class="sidebar-link">2.4.3 查看MySQL中的元数据</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/bigdata/hive_Basic/#_2-5-hive服务部署" class="sidebar-link">2.5 Hive服务部署</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/bigdata/hive_Basic/#_2-5-1-hiveserver2服务" class="sidebar-link">2.5.1 hiveserver2服务</a></li><li class="sidebar-sub-header level4"><a href="/bigdata/hive_Basic/#_1-用户说明" class="sidebar-link">1）用户说明</a></li><li class="sidebar-sub-header level4"><a href="/bigdata/hive_Basic/#_2-hiveserver2部署" class="sidebar-link">2）hiveserver2部署</a></li><li class="sidebar-sub-header level3"><a href="/bigdata/hive_Basic/#_2-5-2-metastore服务" class="sidebar-link">2.5.2 metastore服务</a></li><li class="sidebar-sub-header level4"><a href="/bigdata/hive_Basic/#_1-metastore运行模式" class="sidebar-link">1）metastore运行模式</a></li><li class="sidebar-sub-header level4"><a href="/bigdata/hive_Basic/#_2-metastore部署" class="sidebar-link">2）metastore部署</a></li><li class="sidebar-sub-header level3"><a href="/bigdata/hive_Basic/#_2-5-3-编写hive服务启动脚本-了解" class="sidebar-link">2.5.3 编写Hive服务启动脚本（了解）</a></li><li class="sidebar-sub-header level5"><a href="/bigdata/hive_Basic/#_5-失败的坑" class="sidebar-link">5）失败的坑</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/bigdata/hive_Basic/#_2-6-hive使用技巧" class="sidebar-link">2.6 Hive使用技巧</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/bigdata/hive_Basic/#_2-6-1-hive常用交互命令" class="sidebar-link">2.6.1 Hive常用交互命令</a></li><li class="sidebar-sub-header level3"><a href="/bigdata/hive_Basic/#_2-6-2-hive参数配置方式" class="sidebar-link">2.6.2 Hive参数配置方式</a></li><li class="sidebar-sub-header level4"><a href="/bigdata/hive_Basic/#_1-查看当前所有的配置信息" class="sidebar-link">1）查看当前所有的配置信息</a></li><li class="sidebar-sub-header level4"><a href="/bigdata/hive_Basic/#_2-参数的配置三种方式" class="sidebar-link">2）参数的配置三种方式</a></li><li class="sidebar-sub-header level3"><a href="/bigdata/hive_Basic/#_2-6-3-hive常见属性配置" class="sidebar-link">2.6.3 Hive常见属性配置</a></li><li class="sidebar-sub-header level4"><a href="/bigdata/hive_Basic/#_1-hive客户端显示当前库和表头" class="sidebar-link">1）Hive客户端显示当前库和表头</a></li><li class="sidebar-sub-header level4"><a href="/bigdata/hive_Basic/#_3-hive的jvm堆内存设置" class="sidebar-link">3）Hive的JVM堆内存设置</a></li></ul></li></ul></li><li><a href="/bigdata/hive_sql/" class="sidebar-link">Hive sql</a></li><li><a href="/bigdata/hive_Partition_Bucket/" class="sidebar-link">Hive 分区表和分桶表</a></li><li><a href="/bigdata/hive_File_format_compressiont/" class="sidebar-link">Hive 件格式和压缩</a></li><li><a href="/bigdata/hive_Performance_Tune/" class="sidebar-link">Hive 调优</a></li><li><a href="/bigdata/hive_trap/" class="sidebar-link">Hive入门 的坑</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>scala</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>spark</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E5%A4%A7%E6%95%B0%E6%8D%AE" title="分类" data-v-06225672>大数据</a></li><li data-v-06225672><a href="/categories/?category=hive" title="分类" data-v-06225672>hive</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/andanyoung" target="_blank" title="作者" class="beLink" data-v-06225672>andanyang</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-10-04</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Hive入门<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="第1章-hive入门"><a href="#第1章-hive入门" class="header-anchor">#</a> <strong>第1章</strong> <strong>Hive</strong>入门</h1> <h2 id="_1-1-什么是hive"><a href="#_1-1-什么是hive" class="header-anchor">#</a> 1.1 什么是Hive</h2> <h3 id="_1-hive简介"><a href="#_1-hive简介" class="header-anchor">#</a> 1）Hive简介</h3> <p>Hive是由Facebook开源，基于Hadoop的一个<strong>数据仓库工具</strong>，可以将结构化的数据文件映射为一张表，并提供类SQL查询功能。</p> <p>那为什么会有Hive呢？它是为了解决什么问题而诞生的呢？</p> <p>下面通过一个案例，来快速了解一下Hive。</p> <p>例如：需求，统计单词出现个数。</p> <p>1）在Hadoop课程中我们用MapReduce程序实现的，当时需要写Mapper、Reducer和Driver三个类，并实现对应逻辑，相对繁琐。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>test表
id列

atguigu
atguigu
ss
ss
jiao
banzhang
xue
hadoop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>（2）如果通过Hive SQL实现，一行就搞定了，简单方便，容易理解。</p> <p>2）Hive本质</p> <p>Hive是一个Hadoop客户端，用于将<strong>HQL（Hive SQL）转化成MapReduce程序。</strong></p> <p>（1）Hive中每张表的数据存储在HDFS</p> <p>（2）Hive分析数据底层的实现是MapReduce（也可配置为Spark或者Tez）</p> <p>（3）执行程序运行在Yarn上</p> <h2 id="_1-2-hive架构原理"><a href="#_1-2-hive架构原理" class="header-anchor">#</a> <strong>1.2 Hive架构原理</strong></h2> <p><img src="/assets/img/image-20231004171246091.c42f5a0f.png" alt="Hive架构原理"></p> <h3 id="_1-用户接口-client"><a href="#_1-用户接口-client" class="header-anchor">#</a> 1）用户接口：Client</h3> <p>CLI（command-line interface）、JDBC/ODBC。</p> <p>说明：JDBC和ODBC的区别。</p> <p>（1）JDBC的移植性比ODBC好；（通常情况下，安装完ODBC驱动程序之后，还需要经过确定的配置才能够应用。而不相同的配置在不相同数据库服务器之间不能够通用。所以，安装一次就需要再配置一次。JDBC只需要选取适当的JDBC数据库驱动程序，就不需要额外的配置。在安装过程中，JDBC数据库驱动程序会自己完成有关的配置。）</p> <p>（2）两者使用的语言不同，JDBC在Java编程时使用，ODBC一般在C/C++编程时使用。</p> <h3 id="_2-元数据-metastore"><a href="#_2-元数据-metastore" class="header-anchor">#</a> 2）元数据：Metastore</h3> <p>元数据包括：数据库（默认是default）、表名、表的拥有者、列/分区字段、表的类型（是否是外部表）、表的数据所在目录等。</p> <p>默认存储在<strong>自带的derby数据库</strong>中，由于derby数据库只支持单客户端访问，生产环境中为了多人开发，推荐使用MySQL存储Metastore。</p> <h3 id="_3-驱动器-driver"><a href="#_3-驱动器-driver" class="header-anchor">#</a> 3）驱动器：Driver</h3> <p>（1）解析器（SQLParser）：将SQL字符串转换成抽象语法树（AST）</p> <p>（2）语义分析（Semantic Analyzer）：将AST进一步划分为QeuryBlock</p> <p>（3）逻辑计划生成器（Logical Plan Gen）：将语法树生成逻辑计划</p> <p>（4）逻辑优化器（Logical Optimizer）：对逻辑计划进行优化</p> <p>（5）物理计划生成器（Physical Plan Gen）：根据优化后的逻辑计划生成物理计划</p> <p>（6）物理优化器（Physical Optimizer）：对物理计划进行优化</p> <p>（7）执行器（Execution）：执行该计划，得到查询结果并返回给客户端</p> <p><img src="/assets/img/image-20231004171934467.9b4c3100.png" alt="抽象语法树（AST）"></p> <p><img src="/assets/img/image-20231004172007611.626bc363.png" alt="逻辑计划生成物理计划"></p> <h3 id="_4-hadoop"><a href="#_4-hadoop" class="header-anchor">#</a> 4）Hadoop</h3> <p>使用HDFS进行存储，可以选择MapReduce/Tez/Spark进行计算。</p> <h1 id="第2章-hive安装"><a href="#第2章-hive安装" class="header-anchor">#</a> 第2章 Hive安装</h1> <h2 id="_2-1-hive安装地址"><a href="#_2-1-hive安装地址" class="header-anchor">#</a> <strong>2.1 Hive安装地址</strong></h2> <p>1）Hive官网地址</p> <p>http://hive.apache.org/</p> <p>2）文档查看地址</p> <p>https://cwiki.apache.org/confluence/display/Hive/GettingStarted</p> <p>3）下载地址</p> <p>http://archive.apache.org/dist/hive/</p> <p>4）github地址</p> <p>https://github.com/apache/hive</p> <h2 id="_2-2-hive安装部署"><a href="#_2-2-hive安装部署" class="header-anchor">#</a> 2.2 Hive安装部署</h2> <h3 id="_2-2-1-安装hive"><a href="#_2-2-1-安装hive" class="header-anchor">#</a> 2.2.1 安装Hive</h3> <p>1）把apache-hive-3.1.3-bin.tar.gz上传到Linux的/opt/software目录下</p> <p>2）解压apache-hive-3.1.3-bin.tar.gz到/opt/module/目录下面</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 software]$ tar -zxvf /opt/software/apache-hive-3.1.3-bin.tar.gz -C /opt/module/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>3）修改apache-hive-3.1.3-bin.tar.gz的名称为hive</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 software]$ mv /opt/module/apache-hive-3.1.3-bin/ /opt/module/hive
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>4）修改/etc/profile.d/my_env.sh，添加环境变量</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 software]$ sudo vim /etc/profile.d/my_env.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（1）添加内容</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#HIVE_HOME
export HIVE_HOME=/opt/module/hive
export PATH=$PATH:$HIVE_HOME/bin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>（2）source一下</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 hive]$ source /etc/profile.d/my_env.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>5）初始化元数据库（默认是derby数据库）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 hive]$ bin/schematool -dbType derby -initSchema
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-2-2-启动并使用hive"><a href="#_2-2-2-启动并使用hive" class="header-anchor">#</a> 2.2.2 启动并使用Hive</h3> <p>1）启动Hive</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 hive]$ bin/hive
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2）使用Hive</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>hive&gt; show databases;
hive&gt; show tables;
hive&gt; create table stu(id int, name string);
hive&gt; insert into stu values(1,&quot;ss&quot;);
hive&gt; select * from stu;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>观察HDFS的路径/user/hive/warehouse/stu，体会Hive与Hadoop之间的关系。</p> <p>Hive中的表在Hadoop中是目录；Hive中的数据在Hadoop中是文件。</p> <p><img src="/assets/img/image-20231004172443471.97bf47db.png" alt="image-20231004172443471"></p> <p><img src="/assets/img/image-20231004172508170.5727686a.png" alt="image-20231004172508170"></p> <p>3）在Xshell窗口中开启另一个窗口开启Hive，在/tmp/atguigu目录下监控hive.log文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 atguigu]$ tail -f hive.log


Caused by: ERROR XSDB6: Another instance of Derby may have already booted the database /opt/module/hive/metastore_db.
        at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
        at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
        at org.apache.derby.impl.store.raw.data.BaseDataFileFactory.privGetJBMSLockOnDB(Unknown Source)
        at org.apache.derby.impl.store.raw.data.BaseDataFileFactory.run(Unknown Source)
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>原因在于Hive默认使用的元数据库为derby。derby数据库的特点是同一时间只允许一个客户端访问。如果多个Hive客户端同时访问，就会报错。由于在企业开发中，都是多人协作开发，需要多客户端同时访问Hive，怎么解决呢？我们可以将Hive的元数据改为用MySQL存储，MySQL支持多客户端同时访问。</p></blockquote> <p><img src="/assets/img/image-20231004172628631.c1d7d6ab.png" alt="image-20231004172628631"></p> <p>4）首先退出hive客户端。然后在Hive的安装目录下将derby.log和metastore_db删除，顺便将HDFS上目录删除</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>hive&gt; quit;
[atguigu@hadoop102 hive]$ rm -rf derby.log metastore_db
[atguigu@hadoop102 hive]$ hadoop fs -rm -r /user
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>5）删除HDFS中/user/hive/warehouse/stu中数据</p> <p><img src="/assets/img/image-20231004172703639.04a73c14.png" alt="image-20231004172703639"></p> <p><img src="/assets/img/image-20231004172717230.f5f610b1.png" alt="image-20231004172717230"></p> <h2 id="_2-3-mysql安装"><a href="#_2-3-mysql安装" class="header-anchor">#</a> <strong>2.3 MySQL安装</strong></h2> <h3 id="_2-3-1-安装mysql"><a href="#_2-3-1-安装mysql" class="header-anchor">#</a> 2.3.1 安装MySQL</h3> <p>1）上传MySQL安装包以及MySQL驱动jar包</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql-5.7.28-1.el7.x86_64.rpm-bundle.tar
mysql-connector-java-5.1.37.jar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2）解压MySQL安装包</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 software]$ mkdir mysql_lib
[atguigu@hadoop102 software]$ tar -xf mysql-5.7.28-1.el7.x86_64.rpm-bundle.tar -C mysql_lib/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>3）卸载系统自带的mariadb</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 ~]$ sudo rpm -qa | grep mariadb | xargs sudo rpm -e --nodeps
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>4）安装MySQL依赖</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 software]$ cd mysql_lib
[atguigu@hadoop102 mysql_lib]$ sudo rpm -ivh mysql-community-common-5.7.28-1.el7.x86_64.rpm
[atguigu@hadoop102 mysql_lib]$ sudo rpm -ivh mysql-community-libs-5.7.28-1.el7.x86_64.rpm
[atguigu@hadoop102 mysql_lib]$ sudo rpm -ivh mysql-community-libs-compat-5.7.28-1.el7.x86_64.rpm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>5）安装mysql-client</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 mysql_lib]$ sudo rpm -ivh mysql-community-client-5.7.28-1.el7.x86_64.rpm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>6）安装mysql-server</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 mysql_lib]$ sudo rpm -ivh mysql-community-server-5.7.28-1.el7.x86_64.rpm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>注意：若出现以下错误</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>warning: 05_mysql-community-server-5.7.16-1.el7.x86_64.rpm: Header V3 DSA/SHA1 Signature, key ID 5072e1f5: NOKEY
error: Failed dependencies:
libaio.so.1()(64bit) is needed by mysql-community-server-5.7.16-1.el7.x86_64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>解决办法：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 software]$ sudo yum -y install libaio
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>7）启动MySQL</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 software]$ sudo systemctl start mysqld
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>8）查看MySQL密码</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 software]$ sudo cat /var/log/mysqld.log | grep password
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-3-2-配置mysql"><a href="#_2-3-2-配置mysql" class="header-anchor">#</a> 2.3.2 配置MySQL</h3> <p>配置主要是root用户 + 密码，在任何主机上都能登录MySQL数据库。</p> <p>1）用刚刚查到的密码进入MySQL（如果报错，给密码加单引号）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 software]$ mysql -uroot -p'password'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2）设置复杂密码（由于MySQL密码策略，此密码必须足够复杂）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; set password=password(&quot;Qs23=zs32&quot;);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>3）更改MySQL密码策略</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; set global validate_password_policy=0;
mysql&gt; set global validate_password_length=4;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>4）设置简单好记的密码</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; set password=password(&quot;123456&quot;);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>5）进入MySQL库</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; use mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>6）查询user表</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select user, host from user;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>7）修改user表，把Host表内容修改为%</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; update user set host=&quot;%&quot; where user=&quot;root&quot;;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>8）刷新</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; flush privileges;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>9）退出</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; quit;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-3-3-卸载mysql说明"><a href="#_2-3-3-卸载mysql说明" class="header-anchor">#</a> <strong>2.3.3</strong> <strong>卸载MySQL说明</strong></h3> <blockquote><p>若因为安装失败或者其他原因，MySQL需要卸载重装，可参考以下内容。</p></blockquote> <p>（1）清空原有数据</p> <p>①通过/etc/my.cnf查看MySQL数据的存储位置</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 software]$ sudo cat /etc/my.cnf
[mysqld]
datadir=/var/lib/mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>②去往/var/lib/mysql路径需要root权限</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 mysql]$ su - root
[root@hadoop102 ~]# cd /var/lib/mysql
[root@hadoop102 mysql]# rm -rf *  （注意敲击命令的位置）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>（2）卸载MySQL相关包</p> <p>①查看安装过的MySQL相关包</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 software]$ sudo rpm -qa | grep -i -E mysql

mysql-community-libs-5.7.16-1.el7.x86_64
mysql-community-client-5.7.16-1.el7.x86_64
mysql-community-common-5.7.16-1.el7.x86_64
mysql-community-libs-compat-5.7.16-1.el7.x86_64
mysql-community-server-5.7.16-1.el7.x86_64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>②一键卸载命令</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 software]$ rpm -qa | grep -i -E mysql\|mariadb | xargs -n1 sudo rpm -e --nodeps
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_2-4-配置hive元数据存储到mysql"><a href="#_2-4-配置hive元数据存储到mysql" class="header-anchor">#</a> 2.4 配置Hive元数据存储到MySQL</h2> <p><img src="data:image/png;base64,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" alt="配置Hive元数据存储到MySQL"></p> <h3 id="_2-4-1-配置元数据到mysql"><a href="#_2-4-1-配置元数据到mysql" class="header-anchor">#</a> 2.4.1 配置元数据到MySQL</h3> <p>1）新建Hive元数据库</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#登录MySQL
[atguigu@hadoop102 software]$ mysql -uroot -p123456

#创建Hive元数据库
mysql&gt; create database metastore;
mysql&gt; quit;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>2）将MySQL的JDBC驱动拷贝到Hive的lib目录下。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 software]$ cp /opt/software/mysql-connector-java-5.1.37.jar $HIVE_HOME/lib
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>3）在$HIVE_HOME/conf目录下新建hive-site.xml文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 software]$ vim $HIVE_HOME/conf/hive-site.xml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>添加如下内容：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;

&lt;configuration&gt;
    &lt;!-- jdbc连接的URL --&gt;
    &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;
        &lt;value&gt;jdbc:mysql://hadoop102:3306/metastore?useSSL=false&lt;/value&gt;
    &lt;/property&gt;
    
    &lt;!-- jdbc连接的Driver--&gt;
    &lt;property&gt;
            &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;
        &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;
    &lt;/property&gt;
    
	&lt;!-- jdbc连接的username--&gt;
    &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;
        &lt;value&gt;root&lt;/value&gt;
    &lt;/property&gt;

    &lt;!-- jdbc连接的password --&gt;
    &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;
        &lt;value&gt;123456&lt;/value&gt;
    &lt;/property&gt;

    &lt;!-- Hive默认在HDFS的工作目录 --&gt;
    &lt;property&gt;
        &lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;
        &lt;value&gt;/user/hive/warehouse&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>5）初始化Hive元数据库（修改为采用MySQL存储元数据）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 hive]$ bin/schematool -dbType mysql -initSchema -verbose


beeline&gt;
beeline&gt; Initialization script completed
schemaTool completed
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_2-4-2-验证元数据是否配置成功"><a href="#_2-4-2-验证元数据是否配置成功" class="header-anchor">#</a> 2.4.2 验证元数据是否配置成功</h3> <p>1）再次启动Hive</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 hive]$ bin/hive
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2）使用Hive</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>hive&gt; show databases;
hive&gt; show tables;
hive&gt; create table stu(id int, name string);
hive&gt; insert into stu values(1,&quot;ss&quot;);
hive&gt; select * from stu;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>3）在Xshell窗口中开启另一个窗口开启Hive（两个窗口都可以操作Hive，没有出现异常）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>hive&gt; show databases;
hive&gt; show tables;
hive&gt; select * from stu;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-4-3-查看mysql中的元数据"><a href="#_2-4-3-查看mysql中的元数据" class="header-anchor">#</a> 2.4.3 查看MySQL中的元数据</h3> <p>1）登录MySQL</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 hive]$ mysql -uroot -p123456
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2）查看元数据库metastore</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; show databases;
mysql&gt; use metastore;
mysql&gt; show tables;
mysql&gt; select * from DBS;
+-------+-----------------------+-------------------------------------------+---------+------------+------------+-----------+
| DB_ID | DESC                  | DB_LOCATION_URI                           | NAME    | OWNER_NAME | OWNER_TYPE | CTLG_NAME |
+-------+-----------------------+-------------------------------------------+---------+------------+------------+-----------+
|     1 | Default Hive database | hdfs://hadoop102:8020/user/hive/warehouse | default | public     | ROLE       | hive      |
+-------+-----------------------+-------------------------------------------+---------+------------+------------+-----------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>（2）查看元数据库中存储的表信息</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select * from TBLS;
+--------+-------------+-------+------------------+---------+------------+-----------+-------+----------+---------------+
| TBL_ID | CREATE_TIME | DB_ID | LAST_ACCESS_TIME | OWNER   | OWNER_TYPE | RETENTION | SD_ID | TBL_NAME | TBL_TYPE      | 
+--------+-------------+-------+------------------+---------+------------+-----------+-------+----------+---------------+
|      1 |  1656318303 |     1 |                0 | atguigu | USER       |         0 |     1 | stu      | MANAGED_TABLE |
+--------+-------------+-------+------------------+---------+------------+-----------+-------+----------+---------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>（3）查看元数据库中存储的表中列相关信息</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select * from COLUMNS_V2;
+-------+----------+---------+------------+-------------+-------------+--------+
| CS_ID | CAT_NAME | DB_NAME | TABLE_NAME | COLUMN_NAME | COLUMN_TYPE | TBL_ID |
+-------+----------+---------+------------+-------------+-------------+--------+
|     1 | hive     | default | stu        | id          | int         |      1 |
|     2 | hive     | default | stu        | name        | string      |      1 |
+-------+----------+---------+------------+-------------+-------------+--------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_2-5-hive服务部署"><a href="#_2-5-hive服务部署" class="header-anchor">#</a> 2.5 Hive服务部署</h2> <h3 id="_2-5-1-hiveserver2服务"><a href="#_2-5-1-hiveserver2服务" class="header-anchor">#</a> 2.5.1 hiveserver2服务</h3> <p>Hive的hiveserver2服务的作用是提供jdbc/odbc接口，为用户提供远程访问Hive数据的功能，例如用户期望在个人电脑中访问远程服务中的Hive数据，就需要用到Hiveserver2。</p> <p><img src="data:image/png;base64,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" alt="hiveserver2服务"></p> <h4 id="_1-用户说明"><a href="#_1-用户说明" class="header-anchor">#</a> 1）用户说明</h4> <p>在远程访问Hive数据时，客户端并未直接访问Hadoop集群，而是由Hivesever2代理访问。由于Hadoop集群中的数据具备访问权限控制，所以此时需考虑一个问题：那就是访问Hadoop集群的用户身份是谁？是Hiveserver2的启动用户？还是客户端的登录用户？</p> <p>答案是都有可能，具体是谁，由Hiveserver2的<code>hive.server2.enable.doAs</code>参数决定，该参数的含义是是否启用Hiveserver2用户模拟的功能。若启用，则Hiveserver2会模拟成客户端的登录用户去访问Hadoop集群的数据，不启用，则Hivesever2会直接使用启动用户访问Hadoop集群数据。模拟用户的功能，默认是开启的。</p> <p>具体逻辑如下：</p> <p>未开启用户模拟功能：</p> <p><img src="/assets/img/image-20231005235115449.74a99581.png" alt="未开启用户模拟功能"></p> <p>开启用户模拟功能：</p> <p><img src="/assets/img/image-20231005235144068.e6587867.png" alt="开启用户模拟功能"></p> <p>生产环境，推荐开启用户模拟功能，因为开启后才能保证各用户之间的权限隔离。</p> <h4 id="_2-hiveserver2部署"><a href="#_2-hiveserver2部署" class="header-anchor">#</a> 2）hiveserver2部署</h4> <p>（1）Hadoop端配置</p> <p>hivesever2的模拟用户功能，依赖于Hadoop提供的proxy user（代理用户功能），只有Hadoop中的代理用户才能模拟其他用户的身份访问Hadoop集群。因此，需要<strong>将hiveserver2的启动用户设置为Hadoop的代理用户</strong>，配置方式如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 ~]$ cd $HADOOP_HOME/etc/hadoop
[atguigu@hadoop102 hadoop]$ vim core-site.xml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>增加如下配置：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;!--配置所有节点的atguigu用户都可作为代理用户--&gt;
&lt;property&gt;
    &lt;name&gt;hadoop.proxyuser.atguigu.hosts&lt;/name&gt;
    &lt;value&gt;*&lt;/value&gt;
&lt;/property&gt;

&lt;!--配置atguigu用户能够代理的用户组为任意组--&gt;
&lt;property&gt;
    &lt;name&gt;hadoop.proxyuser.atguigu.groups&lt;/name&gt;
    &lt;value&gt;*&lt;/value&gt;
&lt;/property&gt;
&lt;!--配置atguigu用户能够代理的用户为任意用户--&gt;
&lt;property&gt;
    &lt;name&gt;hadoop.proxyuser.atguigu.users&lt;/name&gt;
    &lt;value&gt;*&lt;/value&gt;
&lt;/property&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>（2）Hive端配置</p> <p>在hive-site.xml文件中添加如下配置信息</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 conf]$ vim hive-site.xml

&lt;!-- 指定hiveserver2连接的host --&gt;
&lt;property&gt;
	&lt;name&gt;hive.server2.thrift.bind.host&lt;/name&gt;
	&lt;value&gt;hadoop102&lt;/value&gt;
&lt;/property&gt;

&lt;!-- 指定hiveserver2连接的端口号 --&gt;
&lt;property&gt;
	&lt;name&gt;hive.server2.thrift.port&lt;/name&gt;
	&lt;value&gt;10000&lt;/value&gt;
&lt;/property&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>3）测试</p> <p>（1）启动hiveserver2</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 hive]$ bin/hive --service hiveserver2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（2）使用命令行客户端beeline进行远程访问</p> <p>启动beeline客户端</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 hive]$ bin/beeline -u jdbc:hive2://hadoop102:10000 -n atguigu
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>看到如下界面</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Connecting to jdbc:hive2://hadoop102:10000
Connected to: Apache Hive (version 3.1.3)
Driver: Hive JDBC (version 3.1.3)
Transaction isolation: TRANSACTION_REPEATABLE_READ
Beeline version 3.1.3 by Apache Hive
0: jdbc:hive2://hadoop102:10000&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>（3）使用Datagrip图形化客户端进行远程访问</p> <p><img src="/assets/img/image-20231006001210600.2c8413a8.png" alt="image-20231006001210600"></p> <blockquote><p><strong>错误：</strong></p> <p>[ 08S01] Could not open client transport with JDBC Uri: jdbc:hive2://192.168.1.100:10000: Failed to open new session: java.lang.RuntimeException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.security.authorize.AuthorizationException): User: root is not allowed to impersonate atguigu org.apache.hadoop.ipc.RemoteException:User: root is not allowed to impersonate atguigu</p> <p>https://code84.com/744774.html</p></blockquote> <p>hive使用 atguigu 用户启动</p> <h3 id="_2-5-2-metastore服务"><a href="#_2-5-2-metastore服务" class="header-anchor">#</a> 2.5.2 metastore服务</h3> <p>Hive的metastore服务的作用是为Hive CLI或者Hiveserver2提供元数据访问接口。</p> <h4 id="_1-metastore运行模式"><a href="#_1-metastore运行模式" class="header-anchor">#</a> 1）metastore运行模式</h4> <p>metastore有两种运行模式，分别为嵌入式模式和独立服务模式。下面分别对两种模式进行说明：</p> <p>（1）嵌入式模式</p> <p><img src="/assets/img/image-20231006234610726.18071138.png" alt="嵌入式模式"></p> <p>（2）独立服务模式</p> <p><img src="/assets/img/image-20231006234648705.b2842f07.png" alt="独立服务模式"></p> <p>生产环境中，不推荐使用嵌入式模式。因为其存在以下两个问题：</p> <p>（1）嵌入式模式下，每个Hive CLI都需要直接连接元数据库，当Hive CLI较多时，数据库压力会比较大。</p> <p>（2）每个客户端都需要用户元数据库的读写权限，元数据库的安全得不到很好的保证。</p> <h4 id="_2-metastore部署"><a href="#_2-metastore部署" class="header-anchor">#</a> 2）metastore部署</h4> <p>（1）嵌入式模式</p> <p>嵌入式模式下，只需保证Hiveserver2和每个Hive CLI的配置文件hive-site.xml中包含连接元数据库所需要的以下参数即可：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> 	&lt;!-- jdbc连接的URL --&gt;
    &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;
        &lt;value&gt;jdbc:mysql://hadoop102:3306/metastore?useSSL=false&lt;/value&gt;
    &lt;/property&gt;
    
    &lt;!-- jdbc连接的Driver--&gt;
    &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;
        &lt;value&gt;com.mysql.cj.jdbc.Driver&lt;/value&gt;
    &lt;/property&gt;
    
	&lt;!-- jdbc连接的username--&gt;
    &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;
        &lt;value&gt;root&lt;/value&gt;
    &lt;/property&gt;

    &lt;!-- jdbc连接的password --&gt;
    &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;
        &lt;value&gt;123456&lt;/value&gt;
    &lt;/property&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>（2）独立服务模式</p> <p>独立服务模式需做以下配置：</p> <p>首先，保证metastore服务的配置文件hive-site.xml中包含连接元数据库所需的以下参数：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> &lt;!-- jdbc连接的URL --&gt;
    &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;
        &lt;value&gt;jdbc:mysql://hadoop102:3306/metastore?useSSL=false&lt;/value&gt;
    &lt;/property&gt;
    
    &lt;!-- jdbc连接的Driver--&gt;
    &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;
        &lt;value&gt;com.mysql.cj.jdbc.Driver&lt;/value&gt;
    &lt;/property&gt;
    
	&lt;!-- jdbc连接的username--&gt;
    &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;
        &lt;value&gt;root&lt;/value&gt;
    &lt;/property&gt;

    &lt;!-- jdbc连接的password --&gt;
    &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;
        &lt;value&gt;123456&lt;/value&gt;
    &lt;/property&gt;
    &lt;!-- 指定hiveserver2连接的端口号 --&gt;
    &lt;property&gt;
        &lt;name&gt;hive.server2.thrift.port&lt;/name&gt;
        &lt;value&gt;10000&lt;/value&gt;
    &lt;/property&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>其次，保证Hiveserver2和每个Hive CLI的配置文件hive-site.xml中包含访问metastore服务所需的以下参数：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;!-- 指定metastore服务的地址 --&gt;
&lt;property&gt;
	&lt;name&gt;hive.metastore.uris&lt;/name&gt;
	&lt;value&gt;thrift://hadoop102:9083&lt;/value&gt;
&lt;/property&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>注意：主机名需要改为metastore服务所在节点，端口号无需修改，metastore服务的默认端口就是9083。</p> <p>3）测试</p> <p>此时启动Hive CLI，执行shou databases语句，会出现一下错误提示信息：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>hive (default)&gt; show databases;
FAILED: HiveException java.lang.RuntimeException: Unable to instantiate org.apache.hadoop.hive.ql.metadata.SessionHiveMetaStoreClient
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这是因为我们在Hive CLI的配置文件中配置了hive.metastore.uris参数，此时Hive CLI会去请求我们执行的metastore服务地址，所以必须启动metastore服务才能正常使用。</p> <p>metastore服务的启动命令如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop202 hive]$ hive --service metastore
2022-04-24 16:58:08: Starting Hive Metastore Server
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>注意：启动后该窗口不能再操作，需打开一个新的Xshell窗口来对Hive操作。</p> <p>重新启动 Hive CLI，并执行shou databases语句，就能正常访问了</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop202 hive]$ bin/hive
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-5-3-编写hive服务启动脚本-了解"><a href="#_2-5-3-编写hive服务启动脚本-了解" class="header-anchor">#</a> 2.5.3 编写Hive服务启动脚本（了解）</h3> <p><strong>1）前台启动的方式导致需要打开多个Xshell窗口，可以使用如下方式后台方式启动</strong></p> <ul><li><p>nohup：放在命令开头，表示不挂起，也就是关闭终端进程也继续保持运行状态</p></li> <li><p>/dev/null：是Linux文件系统中的一个文件，被称为黑洞，所有写入该文件的内容都会被自动丢弃</p></li> <li><p>2&gt;&amp;1：表示将错误重定向到标准输出上</p></li> <li><p>Ø &amp;：放在命令结尾，表示后台运行</p></li></ul> <p>一般会组合使用：nohup  [xxx命令操作]&gt; file  2&gt;&amp;1 &amp;，表示将xxx命令运行的结果输出到file中，并保持命令启动的进程在后台运行。</p> <p>如上命令不要求掌握。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop202 hive]$ nohup hive --service metastore 2&gt;&amp;1 &amp;
[atguigu@hadoop202 hive]$ nohup hive --service hiveserver2 2&gt;&amp;1 &amp;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>2）为了方便使用，可以直接编写脚本来管理服务的启动和关闭</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 hive]$ vim $HIVE_HOME/bin/hiveservices.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>内容如下：此脚本的编写不要求掌握。直接拿来使用即可。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#!/bin/bash

HIVE_LOG_DIR=$HIVE_HOME/logs
if [ ! -d $HIVE_LOG_DIR ]
then
	mkdir -p $HIVE_LOG_DIR
fi

#检查进程是否运行正常，参数1为进程名，参数2为进程端口
function check_process()
{
    pid=$(ps -ef 2&gt;/dev/null | grep -v grep | grep -i $1 | awk '{print $2}')
    ppid=$(netstat -nltp 2&gt;/dev/null | grep $2 | awk '{print $7}' | cut -d '/' -f 1)
    echo $pid
    [[ &quot;$pid&quot; =~ &quot;$ppid&quot; ]] &amp;&amp; [ &quot;$ppid&quot; ] &amp;&amp; return 0 || return 1
}

function hive_start()
{
    metapid=$(check_process HiveMetastore 9083)
    cmd=&quot;nohup hive --service metastore &gt;$HIVE_LOG_DIR/metastore.log 2&gt;&amp;1 &amp;&quot;
    [ -z &quot;$metapid&quot; ] &amp;&amp; su - atguigu -c &quot;$cmd&quot; || echo &quot;Metastroe服务已启动&quot;
    server2pid=$(check_process HiveServer2 10000)
    sleep 10s
    cmd=&quot;nohup hive --service hiveserver2 &gt;$HIVE_LOG_DIR/hiveServer2.log 2&gt;&amp;1 &amp;&quot;
    [ -z &quot;$server2pid&quot; ] &amp;&amp; su - atguigu -c &quot;$cmd&quot; || echo &quot;HiveServer2服务已启动&quot;
}

function hive_stop()
{
	metapid=$(check_process HiveMetastore 9083)
    [ &quot;$metapid&quot; ] &amp;&amp; kill $metapid || echo &quot;Metastore服务未启动&quot;
    server2pid=$(check_process HiveServer2 10000)
    [ &quot;$server2pid&quot; ] &amp;&amp; kill $server2pid || echo &quot;HiveServer2服务未启动&quot;
}

case $1 in
&quot;start&quot;)
    hive_start
    ;;
&quot;stop&quot;)
    hive_stop
    ;;
&quot;restart&quot;)
    hive_stop
    sleep 2
    hive_start
    ;;
&quot;status&quot;)
    check_process HiveMetastore 9083 &gt;/dev/null &amp;&amp; echo &quot;Metastore服务运行正常&quot; || echo &quot;Metastore服务运行异常&quot;
    check_process HiveServer2 10000 &gt;/dev/null &amp;&amp; echo &quot;HiveServer2服务运行正常&quot; || echo &quot;HiveServer2服务运行异常&quot;
    ;;
*)
    echo Invalid Args!
    echo 'Usage: '$(basename $0)' start|stop|restart|status'
    ;;
esac
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><p><strong>3）添加执行权限</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 hive]$ chmod +x $HIVE_HOME/bin/hiveservices.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>4）启动Hive后台服务</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 hive]$ hiveservices.sh start
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_5-失败的坑"><a href="#_5-失败的坑" class="header-anchor">#</a> 5）失败的坑</h5> <ul><li><p><code>org.apache.hadoop.hive.metastore.api.MetaException: User root is not allowed to perform this API call</code></p> <p>请用 指定用户启动</p></li> <li><p>HiveServer2 启动失败连不上 HiveMetastore</p> <p>HiveMetastore 启动慢，使用nohup+ &amp; 不是阻塞当前命令行，需要加个 <code>sleep 10s</code></p></li></ul> <h2 id="_2-6-hive使用技巧"><a href="#_2-6-hive使用技巧" class="header-anchor">#</a> 2.6 Hive使用技巧</h2> <h3 id="_2-6-1-hive常用交互命令"><a href="#_2-6-1-hive常用交互命令" class="header-anchor">#</a> <strong>2.6.1 Hive常用交互命令</strong></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 hive]$ bin/hive -help
usage: hive
 -d,--define &lt;key=value&gt;          Variable subsitution to apply to hive
                                  commands. e.g. -d A=B or --define A=B
    --database &lt;databasename&gt;     Specify the database to use
 -e &lt;quoted-query-string&gt;         SQL from command line
 -f &lt;filename&gt;                      SQL from files
 -H,--help                        Print help information
    --hiveconf &lt;property=value&gt;   Use value for given property
    --hivevar &lt;key=value&gt;         Variable subsitution to apply to hive
                                  commands. e.g. --hivevar A=B
 -i &lt;filename&gt;                    Initialization SQL file
 -S,--silent                      Silent mode in interactive shell
 -v,--verbose                     Verbose mode (echo executed SQL to the console)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>1）在Hive命令行里创建一个表student，并插入1条数据</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>hive (default)&gt; create table student(id int,name string);
OK
Time taken: 1.291 seconds

hive (default)&gt; insert into table student values(1,&quot;zhangsan&quot;);
hive (default)&gt; select * from student;
OK
student.id	student.name
1	zhangsan
Time taken: 0.144 seconds, Fetched: 1 row(s)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>2）“-e”不进入hive的交互窗口执行hql语句</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 hive]$ bin/hive -e &quot;select id from student;&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>3）“-f”执行脚本中的hql语句</p> <p>（1）在/opt/module/hive/下创建datas目录并在datas目录下创建hivef.sql文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 hive]$ mkdir datas
[atguigu@hadoop102 datas]$ vim hivef.sql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>（2）文件中写入正确的hql语句</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>select * from student;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（3）执行文件中的hql语句</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 hive]$ bin/hive -f /opt/module/hive/datas/hivef.sql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（4）执行文件中的hql语句并将结果写入文件中</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 hive]$ bin/hive -f /opt/module/hive/datas/hivef.sql  &gt; /opt/module/hive/datas/hive_result.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-6-2-hive参数配置方式"><a href="#_2-6-2-hive参数配置方式" class="header-anchor">#</a> 2.6.2 Hive参数配置方式</h3> <h4 id="_1-查看当前所有的配置信息"><a href="#_1-查看当前所有的配置信息" class="header-anchor">#</a> 1）查看当前所有的配置信息</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>hive&gt;set;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_2-参数的配置三种方式"><a href="#_2-参数的配置三种方式" class="header-anchor">#</a> 2）参数的配置三种方式</h4> <p>（1）配置文件方式</p> <ul><li><p>默认配置文件：hive-default.xml</p></li> <li><p>用户自定义配置文件：hive-site.xml</p> <p>注意：<strong>用户自定义配置会覆盖默认配置</strong>。另外，Hive也会读入Hadoop的配置，<strong>因为Hive是作为Hadoop的客户端启动的</strong>，Hive的配置会覆盖Hadoop的配置。配置文件的设定对本机启动的所有Hive进程都有效。</p></li></ul> <p>（2）命令行参数方式</p> <p>①启动Hive时，可以在命令行添加-hiveconf param=value来设定参数。例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop103 hive]$ bin/hive -hiveconf
mapreduce.job.reduces=10;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>注意：仅对本次Hive启动有效。</p> <p>②查看参数设置</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>hive (default)&gt; set mapreduce.job.reduces;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（3）参数声明方式</p> <p>可以在HQL中使用SET关键字设定参数，例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>hive(default)&gt; set mapreduce.job.reduces=10;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>注意：仅对本次Hive启动有效。</p></blockquote> <p>查看参数设置：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>hive(default)&gt; set mapreduce.job.reduces;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>上述三种设定方式的优先级依次递增。即**配置文件 &lt; 命令行参数&lt; 参数声明 **。注意某些系统级的参数，例如log4j相关的设定，必须用前两种方式设定，因为那些参数的读取在会话建立以前已经完成了。</p> <h3 id="_2-6-3-hive常见属性配置"><a href="#_2-6-3-hive常见属性配置" class="header-anchor">#</a> 2.6.3 Hive常见属性配置</h3> <h4 id="_1-hive客户端显示当前库和表头"><a href="#_1-hive客户端显示当前库和表头" class="header-anchor">#</a> 1）Hive客户端显示当前库和表头</h4> <p>（1）在hive-site.xml中加入如下两个配置:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 conf]$ vim hive-site.xml

&lt;property&gt;
    &lt;name&gt;hive.cli.print.header&lt;/name&gt;
    &lt;value&gt;true&lt;/value&gt;
    &lt;description&gt;Whether to print the names of the columns in query output.&lt;/description&gt;
&lt;/property&gt;
&lt;property&gt;
    &lt;name&gt;hive.cli.print.current.db&lt;/name&gt;
    &lt;value&gt;true&lt;/value&gt;
    &lt;description&gt;Whether to include the current database in the Hive prompt.&lt;/description&gt;
&lt;/property&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>（2）hive客户端在运行时可以显示当前使用的库和表头信息</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 conf]$ hive

hive (default)&gt; select * from stu;
OK
stu.id	stu.name
1	ss
Time taken: 1.874 seconds, Fetched: 1 row(s)
hive (default)&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>2）Hive运行日志路径配置</p> <p>（1）Hive的log默认存放在/tmp/atguigu/hive.log目录下（当前用户名下）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 atguigu]$ pwd
/tmp/atguigu
[atguigu@hadoop102 atguigu]$ ls
hive.log
hive.log.2022-06-27
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>（2）修改Hive的log存放日志到/opt/module/hive/logs</p> <p>1修改$HIVE_HOME/conf/hive-log4j2.properties.template文件名称为 hive-log4j2.properties</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 conf]$ pwd
/opt/module/hive/conf

[atguigu@hadoop102 conf]$ mv hive-log4j2.properties.template hive-log4j2.properties
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>2在hive-log4j2.properties文件中修改log存放位置</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 conf]$ vim hive-log4j2.properties
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>修改配置如下</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>property.hive.log.dir=/opt/module/hive/logs
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_3-hive的jvm堆内存设置"><a href="#_3-hive的jvm堆内存设置" class="header-anchor">#</a> 3）Hive的JVM堆内存设置</h4> <p>新版本的Hive启动的时候，默认申请的JVM堆内存大小为256M，JVM堆内存申请的太小，导致后期开启本地模式，执行复杂的SQL时经常会报错：java.lang.OutOfMemoryError: Java heap space，因此最好提前调整一下HADOOP_HEAPSIZE这个参数。</p> <p>（1）修改$HIVE_HOME/conf下的hive-env.sh.template为hive-env.sh</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 conf]$ pwd
/opt/module/hive/conf

[atguigu@hadoop102 conf]$ mv hive-env.sh.template hive-env.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>（2）将hive-env.sh其中的参数 export HADOOP_HEAPSIZE修改为2048，重启Hive。
修改前</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># The heap size of the jvm stared by hive shell script can be controlled via:
# export HADOOP_HEAPSIZE=1024
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>修改后</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># The heap size of the jvm stared by hive shell script can be controlled via:
export HADOOP_HEAPSIZE=2048
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>4）关闭Hadoop虚拟内存检查</p> <p>在yarn-site.xml中关闭虚拟内存检查（虚拟内存校验，如果已经关闭了，就不需要配了）。</p> <p>（1）修改前记得先停Hadoop</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[atguigu@hadoop102 hadoop]$ pwd
/opt/module/hadoop-3.1.3/etc/hadoop

[atguigu@hadoop102 hadoop]$ vim yarn-site.xml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>（2）添加如下配置</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;property&gt;
    &lt;name&gt;yarn.nodemanager.vmem-check-enabled&lt;/name&gt;
    &lt;value&gt;false&lt;/value&gt;
&lt;/property&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>（3）修改完后记得分发yarn-site.xml，并重启yarn。</p> <h1 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h1> <blockquote><p>https://cwiki.apache.org/confluence/display/Hive/GettingStarted</p></blockquote></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/andanyang/vuepress-theme-vdoing/edit/master/docs/大数据/004.hive/001.Hive入门.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/03/11, 02:40:47</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/Flume/Advanced/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Flume高级进阶</div></a> <a href="/bigdata/hive_sql/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Hive sql</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Flume/Advanced/" class="prev">Flume高级进阶</a></span> <span class="next"><a href="/bigdata/hive_sql/">Hive sql</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/bigdata/spark/SparkStreaming_Driver_Executer/"><div>
            spark中代码的执行位置（Driver or Executer）
            <!----></div></a> <span class="date">12-12</span></dt></dl><dl><dd>02</dd> <dt><a href="/bigdata/spark/SparkStreaming/"><div>
            大数据技术之 SparkStreaming
            <!----></div></a> <span class="date">12-12</span></dt></dl><dl><dd>03</dd> <dt><a href="/bigdata/spark/sql/"><div>
            Spark 核心编程之 RDD 累加器与广播变量
            <!----></div></a> <span class="date">12-06</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1218853253@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/andanyang" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2024
    <span>Young | <a href="https://github.com/andanyoung/young-blog/blob/master/LICENSE" target="_blank">MIT License</a> <br/> <a  href="https://beian.miit.gov.cn/" target="_blank">浙ICP备20002744号</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.e4caa6db.js" defer></script><script src="/assets/js/2.d1be14c5.js" defer></script><script src="/assets/js/25.e95f81fb.js" defer></script>
  </body>
</html>
