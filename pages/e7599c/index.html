<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第4章 Spring之AOP | Young&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="Young丶java后端技术博客,专注后端学习与总结。擅长spring boot,JAVA基础总结,等方面的知识,关注spring,架构,elasticsearch,mysql领域.">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.d9c8cf8c.css" as="style"><link rel="preload" href="/assets/js/app.db8f46dd.js" as="script"><link rel="preload" href="/assets/js/2.0203b6c2.js" as="script"><link rel="preload" href="/assets/js/80.e7077128.js" as="script"><link rel="prefetch" href="/assets/js/10.690fb2c3.js"><link rel="prefetch" href="/assets/js/100.4160c8cb.js"><link rel="prefetch" href="/assets/js/101.ccab45f7.js"><link rel="prefetch" href="/assets/js/102.86d8b50b.js"><link rel="prefetch" href="/assets/js/103.e084ba4d.js"><link rel="prefetch" href="/assets/js/104.f6132752.js"><link rel="prefetch" href="/assets/js/105.735892bd.js"><link rel="prefetch" href="/assets/js/106.4d0272f1.js"><link rel="prefetch" href="/assets/js/107.46b7e687.js"><link rel="prefetch" href="/assets/js/108.e0e55d1b.js"><link rel="prefetch" href="/assets/js/109.c5425b32.js"><link rel="prefetch" href="/assets/js/11.3d2ce6f0.js"><link rel="prefetch" href="/assets/js/110.5326f9d7.js"><link rel="prefetch" href="/assets/js/111.48b22d89.js"><link rel="prefetch" href="/assets/js/112.ac6881e3.js"><link rel="prefetch" href="/assets/js/113.96c06532.js"><link rel="prefetch" href="/assets/js/114.56bbc7f2.js"><link rel="prefetch" href="/assets/js/115.8c7bf9b3.js"><link rel="prefetch" href="/assets/js/116.67f3408d.js"><link rel="prefetch" href="/assets/js/117.0ace1dc0.js"><link rel="prefetch" href="/assets/js/118.d89a554f.js"><link rel="prefetch" href="/assets/js/119.95f1b802.js"><link rel="prefetch" href="/assets/js/12.1cb8a999.js"><link rel="prefetch" href="/assets/js/120.5f1a9e46.js"><link rel="prefetch" href="/assets/js/121.27c1da88.js"><link rel="prefetch" href="/assets/js/122.608cf944.js"><link rel="prefetch" href="/assets/js/123.8597cbb0.js"><link rel="prefetch" href="/assets/js/124.c974cf61.js"><link rel="prefetch" href="/assets/js/125.62d67f36.js"><link rel="prefetch" href="/assets/js/126.508c3e5b.js"><link rel="prefetch" href="/assets/js/127.e413cc37.js"><link rel="prefetch" href="/assets/js/128.d0a46680.js"><link rel="prefetch" href="/assets/js/129.dc694eb8.js"><link rel="prefetch" href="/assets/js/13.e41951d8.js"><link rel="prefetch" href="/assets/js/130.e89bcc58.js"><link rel="prefetch" href="/assets/js/131.6abbc8c3.js"><link rel="prefetch" href="/assets/js/132.1d8a0d4b.js"><link rel="prefetch" href="/assets/js/133.367ba17f.js"><link rel="prefetch" href="/assets/js/134.c13a3a48.js"><link rel="prefetch" href="/assets/js/135.2eccb99b.js"><link rel="prefetch" href="/assets/js/136.6a3f58b8.js"><link rel="prefetch" href="/assets/js/14.c172a2dc.js"><link rel="prefetch" href="/assets/js/15.84bdd470.js"><link rel="prefetch" href="/assets/js/16.3d40c62a.js"><link rel="prefetch" href="/assets/js/17.5334d60a.js"><link rel="prefetch" href="/assets/js/18.d2a4ad95.js"><link rel="prefetch" href="/assets/js/19.f6d824f5.js"><link rel="prefetch" href="/assets/js/20.b3929e30.js"><link rel="prefetch" href="/assets/js/21.f71ca458.js"><link rel="prefetch" href="/assets/js/22.0ef67904.js"><link rel="prefetch" href="/assets/js/23.29d00545.js"><link rel="prefetch" href="/assets/js/24.64b69429.js"><link rel="prefetch" href="/assets/js/25.056792df.js"><link rel="prefetch" href="/assets/js/26.d19be5ba.js"><link rel="prefetch" href="/assets/js/27.a3c2630d.js"><link rel="prefetch" href="/assets/js/28.ff1adaea.js"><link rel="prefetch" href="/assets/js/29.6f232704.js"><link rel="prefetch" href="/assets/js/3.ed4fdc28.js"><link rel="prefetch" href="/assets/js/30.6bb97abd.js"><link rel="prefetch" href="/assets/js/31.95b49577.js"><link rel="prefetch" href="/assets/js/32.68007a95.js"><link rel="prefetch" href="/assets/js/33.f59bf80f.js"><link rel="prefetch" href="/assets/js/34.610eb061.js"><link rel="prefetch" href="/assets/js/35.06f74c7a.js"><link rel="prefetch" href="/assets/js/36.f8f709e0.js"><link rel="prefetch" href="/assets/js/37.80bfb2f4.js"><link rel="prefetch" href="/assets/js/38.ceab78c0.js"><link rel="prefetch" href="/assets/js/39.b8c560de.js"><link rel="prefetch" href="/assets/js/4.f269b37f.js"><link rel="prefetch" href="/assets/js/40.bba9e35b.js"><link rel="prefetch" href="/assets/js/41.486534a3.js"><link rel="prefetch" href="/assets/js/42.60c49dd1.js"><link rel="prefetch" href="/assets/js/43.64850d63.js"><link rel="prefetch" href="/assets/js/44.de38833a.js"><link rel="prefetch" href="/assets/js/45.385ebf1a.js"><link rel="prefetch" href="/assets/js/46.023a4aed.js"><link rel="prefetch" href="/assets/js/47.5a13306f.js"><link rel="prefetch" href="/assets/js/48.3b93e259.js"><link rel="prefetch" href="/assets/js/49.154b789b.js"><link rel="prefetch" href="/assets/js/5.18bcf9ad.js"><link rel="prefetch" href="/assets/js/50.dd2ab5f8.js"><link rel="prefetch" href="/assets/js/51.5fac40fa.js"><link rel="prefetch" href="/assets/js/52.f3485bb1.js"><link rel="prefetch" href="/assets/js/53.b0c89a06.js"><link rel="prefetch" href="/assets/js/54.b91401a3.js"><link rel="prefetch" href="/assets/js/55.ae194d2d.js"><link rel="prefetch" href="/assets/js/56.1a306f78.js"><link rel="prefetch" href="/assets/js/57.604bcb20.js"><link rel="prefetch" href="/assets/js/58.0defdded.js"><link rel="prefetch" href="/assets/js/59.6a3e62e1.js"><link rel="prefetch" href="/assets/js/6.3cd27eb1.js"><link rel="prefetch" href="/assets/js/60.7c519a21.js"><link rel="prefetch" href="/assets/js/61.774dc890.js"><link rel="prefetch" href="/assets/js/62.35eb30ce.js"><link rel="prefetch" href="/assets/js/63.1a6cbcaf.js"><link rel="prefetch" href="/assets/js/64.1fbf66d9.js"><link rel="prefetch" href="/assets/js/65.7ad1117f.js"><link rel="prefetch" href="/assets/js/66.c5f1d19e.js"><link rel="prefetch" href="/assets/js/67.2169132f.js"><link rel="prefetch" href="/assets/js/68.f2c694e9.js"><link rel="prefetch" href="/assets/js/69.d4a1812f.js"><link rel="prefetch" href="/assets/js/7.5f854c9f.js"><link rel="prefetch" href="/assets/js/70.6a6b37c7.js"><link rel="prefetch" href="/assets/js/71.906844d9.js"><link rel="prefetch" href="/assets/js/72.6b7a9ef1.js"><link rel="prefetch" href="/assets/js/73.1abca390.js"><link rel="prefetch" href="/assets/js/74.a6d4352f.js"><link rel="prefetch" href="/assets/js/75.7a82d4d2.js"><link rel="prefetch" href="/assets/js/76.1be15a8f.js"><link rel="prefetch" href="/assets/js/77.3b4dde84.js"><link rel="prefetch" href="/assets/js/78.4e3ce588.js"><link rel="prefetch" href="/assets/js/79.0687fe81.js"><link rel="prefetch" href="/assets/js/8.dfd849ad.js"><link rel="prefetch" href="/assets/js/81.3649e00a.js"><link rel="prefetch" href="/assets/js/82.af44037f.js"><link rel="prefetch" href="/assets/js/83.a0847393.js"><link rel="prefetch" href="/assets/js/84.7db89754.js"><link rel="prefetch" href="/assets/js/85.5f38fb85.js"><link rel="prefetch" href="/assets/js/86.991d9d61.js"><link rel="prefetch" href="/assets/js/87.e865455d.js"><link rel="prefetch" href="/assets/js/88.fb0c03af.js"><link rel="prefetch" href="/assets/js/89.9dcf659b.js"><link rel="prefetch" href="/assets/js/9.2b8197ec.js"><link rel="prefetch" href="/assets/js/90.c3029ea2.js"><link rel="prefetch" href="/assets/js/91.a6f848ef.js"><link rel="prefetch" href="/assets/js/92.d685d1ee.js"><link rel="prefetch" href="/assets/js/93.8c9bc307.js"><link rel="prefetch" href="/assets/js/94.45f49465.js"><link rel="prefetch" href="/assets/js/95.49c8c6cb.js"><link rel="prefetch" href="/assets/js/96.d15d62af.js"><link rel="prefetch" href="/assets/js/97.1802f1a1.js"><link rel="prefetch" href="/assets/js/98.c9ebfbca.js"><link rel="prefetch" href="/assets/js/99.6a34f6b8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d9c8cf8c.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Young's blog" class="logo"> <span class="site-name can-hide">Young's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/Spring/" class="nav-link">Spring</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章1</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/andanyang/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/logo.png"> <div class="blogger-info"><h3>Young</h3> <span></span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/Spring/" class="nav-link">Spring</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章1</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/andanyang/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/spring/java/" class="sidebar-link">第 1 章 Java 基础</a></li><li><a href="/pages/base/" class="sidebar-link">第2章 Spring基础</a></li><li><a href="/pages/ioc/" class="sidebar-link">第3章 Spring IOC 核心容器</a></li><li><a href="/pages/e7599c/" aria-current="page" class="active sidebar-link">第4章 Spring之AOP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/e7599c/#_4-1-aop-基础" class="sidebar-link">4.1 AOP 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/e7599c/#_4-1-1-aop-的引入" class="sidebar-link">4.1.1 AOP 的引入</a></li><li class="sidebar-sub-header level3"><a href="/pages/e7599c/#_4-1-2-aop-主要概念" class="sidebar-link">4.1.2 AOP 主要概念</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/e7599c/#_4-2-aop-实现" class="sidebar-link">4.2 AOP 实现</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level4"><a href="/pages/e7599c/#_1-经典的基于代理的-aop" class="sidebar-link">1．经典的基于代理的 AOP</a></li><li class="sidebar-sub-header level4"><a href="/pages/e7599c/#_2-aspectj-基于-xml-的配置" class="sidebar-link">2．AspectJ 基于 XML 的配置</a></li><li class="sidebar-sub-header level4"><a href="/pages/e7599c/#_3-aspectj-基于注解的配置" class="sidebar-link">3．AspectJ 基于注解的配置</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/e7599c/#_4-3-小结" class="sidebar-link">4.3 小结</a></li><li class="sidebar-sub-header level2"><a href="/pages/e7599c/#spring-aop-与-aspectj-有什么区别和联系" class="sidebar-link">Spring AOP 与 AspectJ 有什么区别和联系？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/e7599c/#区别" class="sidebar-link">区别</a></li><li class="sidebar-sub-header level4"><a href="/pages/e7599c/#aspectj" class="sidebar-link">AspectJ</a></li><li class="sidebar-sub-header level4"><a href="/pages/e7599c/#spring-aop" class="sidebar-link">Spring AOP</a></li><li class="sidebar-sub-header level3"><a href="/pages/e7599c/#联系" class="sidebar-link">联系</a></li></ul></li></ul></li><li><a href="/pages/299451/" class="sidebar-link">第5章 Spring之DAO</a></li><li><a href="/pages/923052/" class="sidebar-link">第 6 章 Spring的IoC容器系列</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>进阶</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=Spring" title="分类" data-v-06225672>Spring</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/andanyang" target="_blank" title="作者" class="beLink" data-v-06225672>andanyang</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-02-27</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">第4章 Spring之AOP<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="第-4-章-spring-之-aop"><a href="#第-4-章-spring-之-aop" class="header-anchor">#</a> 第 4 章 Spring 之 AOP</h1> <blockquote><p>在上一章节中，我们大致了解了 Spring 核心容器，了解了 IOC 思想在 Spring 中的具体应用 Bean 容器以及 Bean 的配置与使用，这一章我们将开始学习 AOP 在 Spring 框架中的具体应用。</p></blockquote> <p>本章主要涉及的知识点：</p> <ul><li>AOP 的引入：从传统处理方法到 AOP 处理，一步一步引入。</li> <li>AOP 的实现方式：通过实践了解 AOP 的 3 种实现方式。</li></ul> <h2 id="_4-1-aop-基础"><a href="#_4-1-aop-基础" class="header-anchor">#</a> 4.1 AOP 基础</h2> <p>在第 2 章中也有介绍 AOP，不过侧重点是 AOP 的原理和动态代理，本节主要介绍 AOP 的基础知识点。</p> <h3 id="_4-1-1-aop-的引入"><a href="#_4-1-1-aop-的引入" class="header-anchor">#</a> 4.1.1 AOP 的引入</h3> <p>这里可以把单个模块当作一个圆柱，假如没有 AOP，那么在做日志处理的时候，我们就会在每个模块中添加日志或者权限处理，日志或权限类似圆柱体的部分圆柱，如图 4-1 所示。
<img src="https://img-blog.csdnimg.cn/img_convert/fc52c72eff752a2ddb14ed3c3e095520.png" alt="图4-1">
图 4-1</p> <p>一般大多数的日志或权限处理代码是相同的，为了实现代码复用，我们可能把日志处理抽离成一个新的方法，如图 4-2 所示。</p> <p><img src="https://img-blog.csdnimg.cn/img_convert/5a6f6518a902e30dc035cbfb83f82b5c.png" alt="图4-2"></p> <p>图 4-2</p> <p>即使这样，我们仍然必须手动插入这些方法，而且这两个方法是强耦合的。假如此时我们不需要这个功能了，或者想换成其他功能，就必须一个个修改。
通过动态代理，可以在指定位置执行对应流程。这样就可以将一些横向的功能抽离出来，形成一个独立的模块，然后在指定位置插入这些功能。这样的思想被称为面向切面编程，亦即 AOP，如图 4-3 所示。</p> <p><img src="https://img-blog.csdnimg.cn/img_convert/5d5cdde6daaa8d515188a5313a6d6520.png" alt="图4-3"></p> <h3 id="_4-1-2-aop-主要概念"><a href="#_4-1-2-aop-主要概念" class="header-anchor">#</a> 4.1.2 AOP 主要概念</h3> <p>4.1.1 小节介绍了引入 AOP 的好处，本小节来了解一下 AOP 的几个核心概念。</p> <ul><li><p>（1）横切关注点
AOP 把一个业务流程分成几部分，例如权限检查、业务处理、日志记录，每个部分单独处理，然后把它们组装成完整的业务流，每部分被称为切面或关注点。</p></li> <li><p>（2）切面
类是对物体特征的抽象，切面就是对横切关注点的抽象。可以将每部分抽象成一叠纸一样，一层一层的，那么每张纸都是一个切面。</p></li> <li><p>（3）连接点
因为 Spring 只支持方法类型的连接点，所以在 Spring 中连接点指的就是被拦截到的方法，实际上连接点还可以是字段或者构造器。其实，Spring 只支持方法类型的连接点包含字段和构造器。因为字段通过 get、set 方法得到，构造器其实也是方法。Spring 只支持方法类型的连接点和连接点是字段或者构造器是包含关系。</p></li> <li><p>（4）切入点
对连接点进行拦截的定义。连接点可以有很多，但并不一定每个连接点都进行操作，比如莲藕，藕段与藕段之间是有连接点的，但不一定都切开。</p></li> <li><p>（5）通知</p> <p>通知指的就是指拦截到连接点之后要执行的代码，分为前置、后置、异常、最终、环绕通知 5 类。这个有点类似于把藕段与藕段断开之后要做的事情，是往里面加蜂蜜还是做什么。</p></li> <li><p>（6）目标对象
代理的目标对象，就是动态代理的 target，在实际操作中一般会先实现 AOP 的接口，然后配置这些接口作用到哪些对象上，被作用的对象就是目标对象。</p></li> <li><p>（7）织入
切面是独立的，目标对象也是独立的，它们是不耦合的，那它怎么把切面放到目标对象中呢？这时就需要进行织入操作，就类似这种的，怎么把 target 和打印日志联系到一起呢？使用动态代理。在 Spring 中，aop.framework.ProxyFactory 用作织入器，进行横切逻辑的织入。</p></li> <li><p>（8）引入
不改代码的同时，为类动态地添加方法或字段。</p></li></ul> <h2 id="_4-2-aop-实现"><a href="#_4-2-aop-实现" class="header-anchor">#</a> 4.2 AOP 实现</h2> <p>4.1 节主要介绍了 AOP 的理论知识，本节通过示例进一步理解 Spring 中 AOP 的使用，主要介绍 AOP 的 3 种实现方式：经典的基于代理的 AOP、AspectJ 基于 XML 的配置、AspectJ 基于注解的配置。</p> <h4 id="_1-经典的基于代理的-aop"><a href="#_1-经典的基于代理的-aop" class="header-anchor">#</a> 1．经典的基于代理的 AOP</h4> <p>基于代理的 AOP 主要介绍 MethodBeforeAdvice、AfterReturningAdvice、ThrowsAdvice 三个接口的使用。</p> <ul><li>MethodBeforeAdvice：见名知意，通过方法名就可以猜到它的作用。方法前拦截器在执行指定方法前调用，参数分别为被调用的方法、执行时被传入的参数、被拦截的 Bean。</li> <li>AfterReturningAdvice：返回后拦截器，在执行完指定方法并返回之后调用。如果有返回值可以获取到返回值，否则为 null。参数分别为方法返回值、被调用的方法、执行时被传入的参数、被拦截的 Bean。</li> <li>ThrowsAdvice：异常拦截器，在指定方法抛出异常时被调用。该接口并未定义方法，因此不需要实现任何方法。那它是怎么拦截的呢？我们可以查看该接口的定义，在定义类文档中有如图 4-4 所示的说明。例如，在实现该接口的类中定义了 public void afterThrowing(Exception ex)、public void afterThrowing(Method method, Object[] args, Object target, Exception ex)方法抛出异常时就会被调用。
[插图]
图 4-4</li></ul> <p>在软件开发中推荐面向接口的编程，所以这里创建一个 IAOPServices 接口，并定义两个方法：withAopMethod 方法将使用拦截器拦截的方法，withNoAopMethod 方法不会被拦截器拦截。接口代码如下：</p> <p>在软件开发中推荐面向接口的编程，所以这里创建一个 IAOPServices 接口，并定义两个方法：withAopMethod 方法将使用拦截器拦截的方法，withNoAopMethod 方法不会被拦截器拦截。接口代码如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public interface IAOPService {
    public String withAopMethod() throws Exception;

    public String withNoAopMethod() throws Exception;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在 AOPServicesImpl 类中实现了该接口，并在该类中定义了 String 类型的 description 属性，以及对应的 getter、setter 方法。两个接口方法将返回该 description 属性的值。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class AOPServicesImpl implements IAOPService {
    private String description;
    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public String withAopMethod() throws Exception {
        System.out.println(&quot;AOP函数运行方法:withAopMethod&quot;);
        if(description.trim().length()==0){
            throw new Exception(&quot;description为空&quot;);
        }
        return description;
    }

    public String withNoAopMethod() throws Exception {
        System.out.println(&quot;无AOP函数运行方法:withNoAopMethod&quot;);
        return description;
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>上面把要使用 AOP 拦截的方法准备好了，下面就是定义 AOP 拦截器方法了。这里在 AOPInterceptor 类中实现了上面的 AfterReturningAdvice、MethodBeforeAdvice、ThrowsAdvice 三个接口。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class AOPInterceptor  implements AfterReturningAdvice,MethodBeforeAdvice,ThrowsAdvice{
    public void afterReturning(Object value, Method method, Object[] args, Object instance) throws Throwable {

        System.out.println(&quot;方法&quot;+method.getName()+&quot;运行结束,返回值为:&quot;+value);
    }

    public void before(Method method, Object[] args, Object instance) throws Throwable {
        System.out.println(&quot;ִ执行MethodBeforeAdvice,即将执行的方法:&quot;+method.getName());
        if(instance instanceof AOPServicesImpl)
        {
            String description=((AOPServicesImpl)instance).getDescription();
            if(description==null)
            {
                throw new NullPointerException(&quot;description为 null&quot;);
            }
        }
    }
    public void afterThrowing(Exception ex){
        System.out.println(&quot;抛出异常：&quot;+ex.getMessage());
    }

    public void afterThrowing(Method method, Object[] args, Object target, Exception ex){
        System.out.println(&quot;方法&quot;+method.getName()+&quot;抛出异常：&quot;+ex.getMessage());
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>这里要拦截的方法和拦截器都准备好了，怎么将拦截器用于拦截该方法呢？这里就需要进行配置了。首先在 pom.xml 中引入依赖，这里引入 spring-aop、spring-context。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;org.example&lt;/groupId&gt;
    &lt;artifactId&gt;chapter4&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;

    &lt;properties&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        &lt;spring.version&gt;5.0.0.RELEASE&lt;/spring.version&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
            &lt;version&gt;${spring.version}&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;
            &lt;version&gt;${spring.version}&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/project&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>实际上 Spring 无法将 Services 实现类与拦截器直接组装，因为没有对应的 setter、getter 方法。安装时，先借助 Spring 中的代理类将自定义拦截器注入 NameMatchMethodPointcutAdvisor 类的 advice 属性中，再将定义好的 NameMatchMethodPointcutAdvisor 对象注入 ProxyFactoryBean 中。这里将自定义的 AOPInterceptor 拦截器注入 NameMatchMethodPointcutAdvisor 中，然后将 NameMatchMethodPointcutAdvisor 对象注入 ProxyFactoryBean 中。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;

    &lt;bean id=&quot;aopInterceptor&quot; class=&quot;org.springframework.aop.support.NameMatchMethodPointcutAdvisor&quot;&gt;
        &lt;property name=&quot;advice&quot;&gt;
            &lt;bean class=&quot;spring.tutorial.chapter4.aop.AOPInterceptor&quot;&gt;&lt;/bean&gt;
        &lt;/property&gt;
        &lt;property name=&quot;mappedName&quot; value=&quot;withAopMethod&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

    &lt;bean id=&quot;aopService&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;
        &lt;property name=&quot;interceptorNames&quot;&gt;
            &lt;list&gt;
                &lt;value&gt;aopInterceptor&lt;/value&gt;
            &lt;/list&gt;
        &lt;/property&gt;
        &lt;property name=&quot;target&quot;&gt;
            &lt;bean class=&quot;spring.tutorial.chapter4.service.impl.AOPServicesImpl&quot;&gt;
                &lt;property name=&quot;description&quot; value=&quot;basicAop&quot;&gt;&lt;/property&gt;
            &lt;/bean&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
&lt;/beans&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><div class="language- extra-class"><pre><code>从Spring容器中获取IAOPServices对象，并分别执行IAOPServices中的两个方法。Spring会在withAopMethod()方法前后添加拦截器，在withNoAopMethod()方法前后并不会添加。
</code></pre></div><div class="language- line-numbers-mode"><pre class="language-text"><code>public class Chapter4Controller {
  public static void main(String[] args) throws Exception {
      ApplicationContext context=new ClassPathXmlApplicationContext(new String[]{&quot;applicationContext.xml&quot;});
      BeanFactory factory=context;
      IAOPService services=(IAOPService)context.getBean(&quot;aopService&quot;);
      services.withAopMethod();
      services.withNoAopMethod();
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>运行结果如下：</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>ִ执行MethodBeforeAdvice,即将执行的方法:withAopMethod
AOP函数运行方法:withAopMethod
方法withAopMethod运行结束,返回值为:basicAop
无AOP函数运行方法:withNoAopMethod
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_2-aspectj-基于-xml-的配置"><a href="#_2-aspectj-基于-xml-的配置" class="header-anchor">#</a> 2．AspectJ 基于 XML 的配置</h4> <p>AspectJ 是一个面向切面的框架，扩展了 Java 语言。AspectJ 定义了 AOP 语法，有一个专门的编译器，用来生成遵守 Java 字节编码规范的 Class 文件。我们还是利用 IAOPServices 接口、AOPServicesImpl 类实现 AspectJ 基于 XML 的 AOP 编程。表 4-1 给出 AspectJ 主要的配置元素。使用 AspectJ 时需要引入两个依赖项，即 aopalliance、aspectjweaver。在引入这两个依赖项时需要注意，有时会报错，更新两个依赖项的版本就好了。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>	&lt;dependency&gt;
	    &lt;groupId&gt;aopalliance&lt;/groupId&gt;
	    &lt;artifactId&gt;aopalliance&lt;/artifactId&gt;
	    &lt;version&gt;1.0&lt;/version&gt;
	&lt;/dependency&gt;
    &lt;!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver --&gt;
	&lt;dependency&gt;
	    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;
	    &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;
	    &lt;version&gt;1.8.11&lt;/version&gt;
	&lt;/dependency&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>表 4-1 AspectJ 主要的配置元素
<img src="https://img-blog.csdnimg.cn/img_convert/5a8815767dae0e7f8ca245af31013c26.png" alt="image-20201125004430038"></p> <div class="language- extra-class"><pre><code>这里里定义了XMLAdvice拦截器方法，用于演示前置、后置、成功返回、异常返回、环绕通知。
</code></pre></div><p>上面把拦截器定义完了，之后就是把定义好的拦截器与 Services 关联在一起。使用 AOP 配置元素将 Services 与拦截器中的方法关联上。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import org.aspectj.lang.JoinPoint;
import org.aspectj.lang.ProceedingJoinPoint;


public class XMLAdvice {
    public void beforeAdvice() {
        System.out.println(&quot;前置通知执行了&quot;);
    }

    public void afterAdvice() {
        System.out.println(&quot;后置通知执行了&quot;);
    }

    public void afterReturnAdvice(String result) {
        System.out.println(&quot;返回通知执行了&quot; + &quot;运行业务方法返回的结果为&quot; + result);
    }

    public String aroundAdvice(ProceedingJoinPoint proceedingJoinPoint) throws Throwable {
        String result = &quot;&quot;;
        try {
            System.out.println(&quot;环绕通知开始执行了&quot;);
            long start = System.currentTimeMillis();
            result = (String) proceedingJoinPoint.proceed();
            long end = System.currentTimeMillis();
            System.out.println(&quot;环绕通知执行结束了&quot;);
            System.out.println(&quot;执行业务方法共计：&quot; + (end - start) + &quot;毫秒。&quot;);
        } catch (Throwable e) {

        }
        return result;
    }

    public void throwingAdvice(JoinPoint joinPoint, Exception e) {
        StringBuffer stringBuffer = new StringBuffer();
        stringBuffer.append(&quot;异常通知执行了.&quot;);
        stringBuffer.append(&quot;方法:&quot;).append(joinPoint.getSignature().getName()).append(&quot;出现了异常.&quot;);
        stringBuffer.append(&quot;异常信息为:&quot;).append(e.getMessage());
        System.out.println(stringBuffer.toString());
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>上面把拦截器定义完了，之后就是把定义好的拦截器与 Services 关联在一起。使用 AOP 配置元素将 Services 与拦截器中的方法关联上。</p> <p>配置完之后还是和经典的基于代理的 AOP 一样，运行代码从 Spring 容器中获取 IAOPServices 对象，并分别执行 IAOPServices 中的两个方法。Spring 会在 withAopMethod()方法前后添加拦截器，在 withNoAopMethod()方法前后并不会添加。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
       xsi:schemaLocation=&quot;
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;

    &lt;bean id=&quot;serviceImplA&quot; class=&quot;spring.tutorial.chapter4.service.impl.AOPServicesImpl&quot;&gt;
        &lt;property name=&quot;description&quot; value=&quot;basicAop&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

    &lt;bean id=&quot;serviceAspectBean&quot; class=&quot;spring.tutorial.chapter4.service.impl.XMLAdvice&quot; /&gt;
    &lt;aop:config&gt;
        &lt;aop:aspect id=&quot;serviceAspect&quot; ref=&quot;serviceAspectBean&quot;&gt;
            &lt;aop:pointcut id=&quot;servicePointcut&quot; expression=&quot;execution(* spring.tutorial.chapter4.service.*.withAop*(..))&quot; /&gt;
            &lt;aop:before pointcut-ref=&quot;servicePointcut&quot; method=&quot;beforeAdvice&quot; /&gt;
            &lt;aop:after pointcut-ref=&quot;servicePointcut&quot; method=&quot;afterAdvice&quot; /&gt;
            &lt;aop:after-returning pointcut-ref=&quot;servicePointcut&quot; method=&quot;afterReturnAdvice&quot; returning=&quot;result&quot; /&gt;
            &lt;aop:around pointcut-ref=&quot;servicePointcut&quot; method=&quot;aroundAdvice&quot; /&gt;
            &lt;aop:after-throwing pointcut-ref=&quot;servicePointcut&quot; method=&quot;throwingAdvice&quot; throwing=&quot;e&quot; /&gt;
        &lt;/aop:aspect&gt;
    &lt;/aop:config&gt;
&lt;/beans&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>配置完之后还是和经典的基于代理的 AOP 一样，运行代码从 Spring 容器中获取 IAOPServices 对象，并分别执行 IAOPServices 中的两个方法。Spring 会在 withAopMethod()方法前后添加拦截器，在 withNoAopMethod()方法前后并不会添加。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ApplicationContext context =
        new ClassPathXmlApplicationContext(new String[] {&quot;ajApplicationContext.xml&quot;});
    BeanFactory factory = context;
    IAOPService services = (IAOPService) context.getBean(&quot;serviceImplA&quot;);
    services.withAopMethod();
    services.withNoAopMethod();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>运行结果如下</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>前置通知执行了
环绕通知开始执行了
AOP函数运行方法:withAopMethod
环绕通知执行结束了
执行业务方法共计：0毫秒。
返回通知执行了运行业务方法返回的结果为basicAop
后置通知执行了
无AOP函数运行方法:withNoAopMethod
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_3-aspectj-基于注解的配置"><a href="#_3-aspectj-基于注解的配置" class="header-anchor">#</a> 3．AspectJ 基于注解的配置</h4> <p>AspectJ 基于 XML 的配置还是需要在 XML 中配置 AOP 元素。现在一般提倡使用注解来进行编程，AspectJ 也提供了基于注解的实现方式。基于注解的 AOP 配置其实和基于 XML 的一样，可以参照基于 XML 的来进行理解。这里定义了 AnnontationAdvice，并用@Aspect 注解定义切面。在 XML 中的配置元素改成了注解关键字。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>package spring.tutorial.chapter4.service.impl;

import org.aspectj.lang.JoinPoint;
import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.*;
import org.springframework.stereotype.Component;

@Aspect
@Component
public class AnnontationAdvice {
  @Before(&quot;execution(* spring.tutorial.chapter4.service.*.withAop*(..))&quot;)
  public void beforeAdvice() {
    System.out.println(&quot;前置通知执行了&quot;);
  }

  @After(&quot;execution(* spring.tutorial.chapter4.service.*.withAop*(..))&quot;)
  public void afterAdvice() {
    System.out.println(&quot;后置通知执行了&quot;);
  }

  @AfterReturning(
      value = &quot;execution(* spring.tutorial.chapter4.service.*.withAop*(..))&quot;,
      returning = &quot;result&quot;)
  public void afterReturnAdvice(String result) {
    System.out.println(&quot;返回通知执行了&quot; + &quot;运行业务方法返回的结果为&quot; + result);
  }

  @Around(value = &quot;execution(* spring.tutorial.chapter4.service.*.withAop*(..))&quot;)
  public String aroundAdvice(ProceedingJoinPoint proceedingJoinPoint) throws Throwable {
    String result = &quot;&quot;;
    try {
      System.out.println(&quot;环绕通知开始执行了&quot;);
      long start = System.currentTimeMillis();
      result = (String) proceedingJoinPoint.proceed();
      long end = System.currentTimeMillis();
      System.out.println(&quot;环绕通知执行结束了&quot;);
      System.out.println(&quot;执行业务方法共计：&quot; + (end - start) + &quot;毫秒。&quot;);
    } catch (Throwable e) {

    }
    return result;
  }

  @AfterThrowing(
      value = &quot;execution(* spring.tutorial.chapter4.service.*.withAop*(..))&quot;,
      throwing = &quot;e&quot;)
  public void throwingAdvice(JoinPoint joinPoint, Exception e) {
    StringBuffer stringBuffer = new StringBuffer();
    stringBuffer.append(&quot;异常通知执行了.&quot;);
    stringBuffer.append(&quot;方法:&quot;).append(joinPoint.getSignature().getName()).append(&quot;出现了异常.&quot;);
    stringBuffer.append(&quot;异常信息为:&quot;).append(e.getMessage());
    System.out.println(stringBuffer.toString());
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><div class="language- extra-class"><pre><code>在配置文件中只需配置一下自动扫描的包名，并配置`&lt;aop:aspectj-autoproxy&gt;`即可，比XML的配置简单一些。
</code></pre></div><div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;!-- 配置自动扫描的包 --&gt;
&lt;context:component-scan base-package=&quot;spring.tutorial.chapter4.service&quot;&gt;&lt;/context:component-scan&gt;
&lt;!-- 自动为切面方法中匹配的方法所在的类生成代理对象。 --&gt;
&lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>最后从 Spring 容器中获取 IAOPServices 对象，并分别执行 IAOPServices 中的两个方法。运行结果如下，从打印的日志可以看到拦截器拦截了 withAopMethod()方法，并未拦截 withNoAopMethod()：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>环绕通知开始执行了
前置通知执行了
AOP函数运行方法:withAopMethod
环绕通知执行结束了
执行业务方法共计：0毫秒。
后置通知执行了
返回通知执行了运行业务方法返回的结果为basicAop
无AOP函数运行方法:withNoAopMethod
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_4-3-小结"><a href="#_4-3-小结" class="header-anchor">#</a> 4.3 小结</h2> <p>本章主要从传统处理方式一步一步地引入 AOP，介绍 AOP 的主要概念，并列举了 AOP 的 3 种实现。通过本章的学习，对 AOP 思想有了更深入的认识。其实，实现 AOP 还有其他方式，这里就不一一列举了。</p> <h2 id="spring-aop-与-aspectj-有什么区别和联系"><a href="#spring-aop-与-aspectj-有什么区别和联系" class="header-anchor">#</a> Spring AOP 与 AspectJ 有什么区别和联系？</h2> <h3 id="区别"><a href="#区别" class="header-anchor">#</a> 区别</h3> <h4 id="aspectj"><a href="#aspectj" class="header-anchor">#</a> AspectJ</h4> <p>AspectJ 是一个面向切面的框架，它扩展了 Java 语言。AspectJ 定义了 AOP 语法，所以它有一个<strong>专门的编译器</strong>用来生成遵守 Java 字节编码规范的 Class 文件。</p> <h4 id="spring-aop"><a href="#spring-aop" class="header-anchor">#</a> Spring AOP</h4> <p>Spring 提供了四种类型的 AOP 支持</p> <ul><li>基于经典的 SpringAOP</li> <li>纯 POJO 切面</li> <li>@ASpectJ 注解驱动的切面</li> <li>注入式 AspectJ 切面（其实与 Spring 并无多大的关系，这个就是使用 AspectJ 这个框架实现 Aop 编程）</li></ul> <h3 id="联系"><a href="#联系" class="header-anchor">#</a> 联系</h3> <p>我们借助于 Spring AOP 的命名空间可以将纯 POJO 转换为切面，实际上这些 POJO 只是提供了满足切点的条件时所需要调用的方法，但是，这种技术需要 XML 进行配置，不能支持注解。</p> <p>所以 Spring<strong>借鉴</strong>了<code>AspectJ</code>的切面，以提供注解驱动的 AOP，本质上它依然是 Spring 基于代理的 AOP，只是编程模型与 AspectJ 完全一致，这种风格的好处就是不需要使用 XML 进行配置。</p> <p>使用@Aspect 方式，你就可以在类上直接一个<code>@Aspect</code>就搞定，不用费事在 xml 里配了。但是这需要额外的 jar 包（<code>aspectjweaver.jar</code>）。因为 spring 直接使用<code>AspectJ</code>的<strong>注解功能，注意只是使用了它 的注解功能而已，并不是核心功能</strong> 。</p> <blockquote><p>SpringAOP 的底层技术依然是 Jdk 动态代理和 Cglib。</p></blockquote></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/andanyang/vuepress-theme-vdoing/edit/master/docs/Spring/00004.第4章 Spring之AOP.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/08/01, 05:35:12</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/ioc/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">第3章 Spring IOC 核心容器</div></a> <a href="/pages/299451/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">第5章 Spring之DAO</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/ioc/" class="prev">第3章 Spring IOC 核心容器</a></span> <span class="next"><a href="/pages/299451/">第5章 Spring之DAO</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/digitalization/详谈装备制造业MES系统功能以及实施要点/"><div>
            详谈装备制造业MES系统功能以及实施要点
            <!----></div></a> <span class="date">07-14</span></dt></dl><dl><dd>02</dd> <dt><a href="/digitalization/MES生产过程控制：实现智能工厂的关键/"><div>
            扩展阅读-MES生产过程控制：实现智能工厂的关键
            <!----></div></a> <span class="date">07-14</span></dt></dl><dl><dd>03</dd> <dt><a href="/digitalization/DX_technology_business/"><div>
            数字化转型的核心是技术？还是业务？
            <!----></div></a> <span class="date">07-13</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1218853253@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/andanyang" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2023
    <span>Young | <a href="https://github.com/andanyoung/young-blog/blob/master/LICENSE" target="_blank">MIT License</a> <br/> <a  href="https://beian.miit.gov.cn/" target="_blank">浙ICP备20002744号</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.db8f46dd.js" defer></script><script src="/assets/js/2.0203b6c2.js" defer></script><script src="/assets/js/80.e7077128.js" defer></script>
  </body>
</html>
